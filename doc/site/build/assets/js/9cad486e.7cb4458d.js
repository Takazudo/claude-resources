"use strict";(self.webpackChunkclaude_code_doc_site=self.webpackChunkclaude_code_doc_site||[]).push([[7403],{3351(e,t,n){n.d(t,{R:()=>o,x:()=>c});var s=n(2128);const r={},a=s.createContext(r);function o(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(a.Provider,{value:t},e.children)}},7933(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>i});const s=JSON.parse('{"id":"claude/skills/docusaurus-category-nav","title":"docusaurus-category-nav","description":"Add auto-generated CategoryNav component to Docusaurus category index pages. Use when adding category navigation to a Docusaurus doc site, or when the user says \'category nav\', \'add category navigatio...","source":"@site/docs/claude/skills/docusaurus-category-nav.mdx","sourceDirName":"claude/skills","slug":"/claude/skills/docusaurus-category-nav","permalink":"/docs/claude/skills/docusaurus-category-nav","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"title":"docusaurus-category-nav","description":"Add auto-generated CategoryNav component to Docusaurus category index pages. Use when adding category navigation to a Docusaurus doc site, or when the user says \'category nav\', \'add category navigatio..."},"sidebar":"claudeSidebar","previous":{"title":"docusaurus-amplify-fix","permalink":"/docs/claude/skills/docusaurus-amplify-fix"},"next":{"title":"docusaurus-develop","permalink":"/docs/claude/skills/docusaurus-develop"}}');var r=n(7900),a=n(3351);const o={title:"docusaurus-category-nav",description:"Add auto-generated CategoryNav component to Docusaurus category index pages. Use when adding category navigation to a Docusaurus doc site, or when the user says 'category nav', 'add category navigatio..."},c="docusaurus-category-nav",d={},i=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Detect Docusaurus Root",id:"step-1-detect-docusaurus-root",level:2},{value:"Step 2: Ask the user for section title",id:"step-2-ask-the-user-for-section-title",level:2},{value:"Step 3: Create the generation script",id:"step-3-create-the-generation-script",level:2},{value:"Step 4: Create the CategoryNav component",id:"step-4-create-the-categorynav-component",level:2},{value:"Step 5: Add to category index pages",id:"step-5-add-to-category-index-pages",level:2},{value:"Step 6: Wire up scripts and gitignore",id:"step-6-wire-up-scripts-and-gitignore",level:2},{value:"Step 7: Verify",id:"step-7-verify",level:2}];function l(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"docusaurus-category-nav",children:"docusaurus-category-nav"})}),"\n",(0,r.jsx)(t.h1,{id:"docusaurus-categorynav",children:"Docusaurus CategoryNav"}),"\n",(0,r.jsxs)(t.p,{children:["Add a ",(0,r.jsx)(t.code,{children:"<CategoryNav />"})," component to Docusaurus category index pages that auto-generates navigation lists from ",(0,r.jsx)(t.code,{children:"category-nav.json"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"gray-matter"})," npm dependency"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"generate-category-nav.js"})," script (see Step 2)"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"generate"})," npm script wired into ",(0,r.jsx)(t.code,{children:"start"}),"/",(0,r.jsx)(t.code,{children:"build"})]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"step-1-detect-docusaurus-root",children:"Step 1: Detect Docusaurus Root"}),"\n",(0,r.jsxs)(t.p,{children:["Find the Docusaurus root directory by locating ",(0,r.jsx)(t.code,{children:"docusaurus.config.ts"})," or ",(0,r.jsx)(t.code,{children:"docusaurus.config.js"})," in the project. This directory is referred to as ",(0,r.jsx)(t.code,{children:"{DOCUSAURUS_ROOT}"})," in all subsequent steps. Do not assume it is ",(0,r.jsx)(t.code,{children:"doc/"})," or any other hardcoded path."]}),"\n",(0,r.jsx)(t.h2,{id:"step-2-ask-the-user-for-section-title",children:"Step 2: Ask the user for section title"}),"\n",(0,r.jsxs)(t.p,{children:["Ask the user what heading to use above the CategoryNav component. Default: ",(0,r.jsx)(t.code,{children:"Documents in this category"})]}),"\n",(0,r.jsx)(t.h2,{id:"step-3-create-the-generation-script",children:"Step 3: Create the generation script"}),"\n",(0,r.jsxs)(t.p,{children:["Create ",(0,r.jsx)(t.code,{children:"{DOCUSAURUS_ROOT}/scripts/generate-category-nav.js"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"#!/usr/bin/env node\nconst fs = require('fs');\nconst path = require('path');\nconst matter = require('gray-matter');\n\nconst DOCS_DIR = path.join(__dirname, '../docs');\nconst OUTPUT_FILE = path.join(__dirname, '../src/data/category-nav.json');\n\n// Customize per project: 'auto' = auto-detect subdirs, [] = flat (no subdirs)\nconst CATEGORY_STRUCTURE = {\n  // example: 'auto',\n  // knowledge: [],\n};\n"})}),"\n",(0,r.jsxs)(t.p,{children:["The script scans each category directory for ",(0,r.jsx)(t.code,{children:".md"}),"/",(0,r.jsx)(t.code,{children:".mdx"})," files, extracts titles from frontmatter or H1 headings, reads ",(0,r.jsx)(t.code,{children:"sidebar_position"})," for sorting, and outputs ",(0,r.jsx)(t.code,{children:"src/data/category-nav.json"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["Key functions needed: ",(0,r.jsx)(t.code,{children:"findSubdirectories"}),", ",(0,r.jsx)(t.code,{children:"findMarkdownFiles"}),", ",(0,r.jsx)(t.code,{children:"extractTitle"}),", ",(0,r.jsx)(t.code,{children:"extractSidebarPosition"}),", ",(0,r.jsx)(t.code,{children:"getDocId"}),", ",(0,r.jsx)(t.code,{children:"isIndexFile"}),", ",(0,r.jsx)(t.code,{children:"getPagesForDirectory"}),", ",(0,r.jsx)(t.code,{children:"getCategoryLabel"}),", ",(0,r.jsx)(t.code,{children:"getCategoryPosition"}),", ",(0,r.jsx)(t.code,{children:"getIndexInfo"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"Output format:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "categoryName": {\n    "pages": [{ "docId": "cat/page", "title": "Page Title", "position": 1 }],\n    "subcategories": [{\n      "key": "subdir",\n      "title": "Subdir Title",\n      "docId": "cat/subdir/index",\n      "hasIndex": true,\n      "position": 1,\n      "pages": [...]\n    }]\n  }\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"step-4-create-the-categorynav-component",children:"Step 4: Create the CategoryNav component"}),"\n",(0,r.jsxs)(t.p,{children:["Create ",(0,r.jsx)(t.code,{children:"{DOCUSAURUS_ROOT}/src/components/CategoryNav/index.tsx"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"import type { ReactNode } from 'react';\nimport useBaseUrl from '@docusaurus/useBaseUrl';\nimport categoryNav from '@site/src/data/category-nav.json';\nimport styles from './styles.module.css';\n\ntype CategoryKey = keyof typeof categoryNav;\n\nexport default function CategoryNav({ category }: { category: CategoryKey }): ReactNode {\n  const docsBaseUrl = useBaseUrl('/docs/');\n  const data = categoryNav[category];\n  // Render pages as <ul><li><a>...</a></li></ul>\n  // Render subcategories with nested <ul> for their pages\n  // If subcategory hasIndex, render as link; otherwise plain <span>\n}\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Create ",(0,r.jsx)(t.code,{children:"{DOCUSAURUS_ROOT}/src/components/CategoryNav/styles.module.css"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-css",children:".navList { margin: 1rem 0; }\n.navItem { margin: 0.25rem 0; }\n.navItem a { color: var(--ifm-link-color); }\n.navItem a:hover { color: var(--ifm-link-hover-color); }\n.subcategoryLabel { color: var(--ifm-font-color-base); }\n.empty { color: var(--ifm-color-emphasis-600); font-style: italic; }\n"})}),"\n",(0,r.jsx)(t.h2,{id:"step-5-add-to-category-index-pages",children:"Step 5: Add to category index pages"}),"\n",(0,r.jsxs)(t.p,{children:["For each category index ",(0,r.jsx)(t.code,{children:".md"})," or ",(0,r.jsx)(t.code,{children:".mdx"})," file, append:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-md",children:"## Documents in this category\n\nimport CategoryNav from '@site/src/components/CategoryNav';\n\n<CategoryNav category=\"CATEGORY_NAME\" />\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Replace the ",(0,r.jsx)(t.code,{children:"## Documents in this category"})," heading with whatever the user chose in Step 1."]}),"\n",(0,r.jsx)(t.h2,{id:"step-6-wire-up-scripts-and-gitignore",children:"Step 6: Wire up scripts and gitignore"}),"\n",(0,r.jsxs)(t.p,{children:["In ",(0,r.jsx)(t.code,{children:"package.json"}),", add:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'"generate:category-nav": "node scripts/generate-category-nav.js"\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Ensure ",(0,r.jsx)(t.code,{children:"generate"})," script calls it, and ",(0,r.jsx)(t.code,{children:"start"}),"/",(0,r.jsx)(t.code,{children:"build"})," call ",(0,r.jsx)(t.code,{children:"generate"})," first."]}),"\n",(0,r.jsxs)(t.p,{children:["Add to ",(0,r.jsx)(t.code,{children:".gitignore"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"src/data/category-nav.json\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Install ",(0,r.jsx)(t.code,{children:"gray-matter"})," if not already present."]}),"\n",(0,r.jsx)(t.h2,{id:"step-7-verify",children:"Step 7: Verify"}),"\n",(0,r.jsxs)(t.p,{children:["Run ",(0,r.jsx)(t.code,{children:"pnpm run generate"})," and check that ",(0,r.jsx)(t.code,{children:"src/data/category-nav.json"})," is created. Then run ",(0,r.jsx)(t.code,{children:"pnpm run build"})," to verify no errors."]})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);