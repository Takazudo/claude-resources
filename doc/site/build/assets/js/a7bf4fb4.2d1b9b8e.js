"use strict";(self.webpackChunkclaude_code_doc_site=self.webpackChunkclaude_code_doc_site||[]).push([[1683],{3351(e,n,s){s.d(n,{R:()=>r,x:()=>d});var i=s(2128);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},6598(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"claude/skills/kicad-sch-tweak","title":"kicad-sch-tweak","description":"Edit and create KiCad schematic (.kicad_sch) files. Use when user says \'edit schematic\', \'modify kicad\', \'add component\', \'change resistor value\', \'update schematic\', or similar. Capabilities: (1) Mod...","source":"@site/docs/claude/skills/kicad-sch-tweak.mdx","sourceDirName":"claude/skills","slug":"/claude/skills/kicad-sch-tweak","permalink":"/docs/claude/skills/kicad-sch-tweak","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"title":"kicad-sch-tweak","description":"Edit and create KiCad schematic (.kicad_sch) files. Use when user says \'edit schematic\', \'modify kicad\', \'add component\', \'change resistor value\', \'update schematic\', or similar. Capabilities: (1) Mod..."},"sidebar":"claudeSidebar","previous":{"title":"jlcpcb-component-finder","permalink":"/docs/claude/skills/jlcpcb-component-finder"},"next":{"title":"KiCad Schematic File Format Reference","permalink":"/docs/claude/skills/kicad-sch-tweak/kicad-sch-format"}}');var t=s(7900),l=s(3351);const r={title:"kicad-sch-tweak",description:"Edit and create KiCad schematic (.kicad_sch) files. Use when user says 'edit schematic', 'modify kicad', 'add component', 'change resistor value', 'update schematic', or similar. Capabilities: (1) Mod..."},d="kicad-sch-tweak",c={},o=[{value:"Quick Reference",id:"quick-reference",level:2},{value:"Recommended Workflow: User + AI Collaboration",id:"recommended-workflow-user--ai-collaboration",level:2},{value:"Workflow",id:"workflow",level:2},{value:"1. Safety Check &amp; Discover Project",id:"1-safety-check--discover-project",level:3},{value:"2. Understand User Request",id:"2-understand-user-request",level:3},{value:"3. Make Edits",id:"3-make-edits",level:3},{value:"4. Validate",id:"4-validate",level:3},{value:"Project Discovery",id:"project-discovery",level:2},{value:"Symbol Template",id:"symbol-template",level:2},{value:"Power Symbols",id:"power-symbols",level:2},{value:"Coordinate System",id:"coordinate-system",level:2},{value:"Reference Designators",id:"reference-designators",level:2},{value:"Limitations",id:"limitations",level:2},{value:"CRITICAL: lib_symbols Section (KiCad 9.0+)",id:"critical-lib_symbols-section-kicad-90",level:2},{value:"How to add a new symbol:",id:"how-to-add-a-new-symbol",level:3},{value:"CRITICAL: Format Matching",id:"critical-format-matching",level:2},{value:"UUID Format (CRITICAL - causes crashes if wrong!)",id:"uuid-format-critical---causes-crashes-if-wrong",level:3},{value:"Pin Format",id:"pin-format",level:3},{value:"Instances Format",id:"instances-format",level:3},{value:"Text Elements",id:"text-elements",level:3},{value:"Labels Format",id:"labels-format",level:3},{value:"sym-lib-table Required",id:"sym-lib-table-required",level:2},{value:"Error Recovery",id:"error-recovery",level:2},{value:"References",id:"references",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"kicad-sch-tweak",children:"kicad-sch-tweak"})}),"\n",(0,t.jsx)(n.admonition,{title:"Bundled Resources",type:"info",children:(0,t.jsxs)(n.p,{children:["This skill includes: ",(0,t.jsx)(n.a,{href:"#references",children:"references"})]})}),"\n",(0,t.jsx)(n.h1,{id:"kicad-schematic-editor",children:"KiCad Schematic Editor"}),"\n",(0,t.jsx)(n.p,{children:"Edit KiCad 6+ schematic files (.kicad_sch) using S-expression text format."}),"\n",(0,t.jsx)(n.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Format docs"}),": See ",(0,t.jsx)(n.a,{href:"references/kicad-sch-format.md",children:"references/kicad-sch-format.md"})," for complete S-expression syntax"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"recommended-workflow-user--ai-collaboration",children:"Recommended Workflow: User + AI Collaboration"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Best practice for adding components:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"User adds components via KiCad GUI"}),": Use KiCad's graphical interface to add new symbol types. This automatically:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Populates the ",(0,t.jsx)(n.code,{children:"lib_symbols"})," section with full symbol definitions"]}),"\n",(0,t.jsx)(n.li,{children:"Ensures correct UUID formats"}),"\n",(0,t.jsx)(n.li,{children:"Handles footprint assignments"}),"\n",(0,t.jsx)(n.li,{children:"Places components roughly where needed"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"AI performs text-based tweaks"}),": After user adds components, AI can efficiently:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Add/modify global labels and net labels"}),"\n",(0,t.jsx)(n.li,{children:"Add wires and junctions"}),"\n",(0,t.jsx)(n.li,{children:"Change component values"}),"\n",(0,t.jsx)(n.li,{children:"Adjust coordinates"}),"\n",(0,t.jsx)(n.li,{children:"Add text annotations"}),"\n",(0,t.jsx)(n.li,{children:"Duplicate existing components (copy from file)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Why this workflow?"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Adding NEW symbol types programmatically requires copying entire symbol definitions to ",(0,t.jsx)(n.code,{children:"lib_symbols"})," - tedious and error-prone"]}),"\n",(0,t.jsx)(n.li,{children:"KiCad GUI handles library caching automatically"}),"\n",(0,t.jsx)(n.li,{children:"AI excels at repetitive text operations (adding 80 labels for 8 IDC headers)"}),"\n",(0,t.jsx)(n.li,{children:"Reduces risk of file corruption from format mismatches"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Workflow example:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:'User: "I need 8 IDC headers and 4 fuses" \u2192 adds in KiCad, saves'}),"\n",(0,t.jsx)(n.li,{children:'AI: "Let me add power rail labels to all headers" \u2192 edits .kicad_sch'}),"\n",(0,t.jsx)(n.li,{children:"User: Opens KiCad, adjusts layout, verifies connections"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"workflow",children:"Workflow"}),"\n",(0,t.jsx)(n.h3,{id:"1-safety-check--discover-project",children:"1. Safety Check & Discover Project"}),"\n",(0,t.jsx)(n.p,{children:"Before editing, always:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Verify file is version-controlled"}),": Run ",(0,t.jsx)(n.code,{children:"git status"})," to confirm changes can be reverted"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Read the target .kicad_sch file"})," to understand current structure"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Find symbol libraries"}),": Read ",(0,t.jsx)(n.code,{children:"sym-lib-table"})," for available symbol library names"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Find available symbols"}),": Read the project's ",(0,t.jsx)(n.code,{children:".kicad_sym"})," file(s) referenced in sym-lib-table"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Get sheet UUIDs"}),": Read root ",(0,t.jsx)(n.code,{children:".kicad_sch"})," for sheet hierarchy and UUIDs"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-understand-user-request",children:"2. Understand User Request"}),"\n",(0,t.jsx)(n.p,{children:"Clarify with user if needed:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Which components to add/modify/remove"}),"\n",(0,t.jsx)(n.li,{children:"Component values (resistance, capacitance, etc.)"}),"\n",(0,t.jsx)(n.li,{children:"Connection requirements (what connects to what)"}),"\n",(0,t.jsx)(n.li,{children:"For new circuits: reference documentation or ASCII diagram"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-make-edits",children:"3. Make Edits"}),"\n",(0,t.jsxs)(n.p,{children:["Use the Edit tool for targeted changes. ",(0,t.jsx)(n.strong,{children:"Always copy patterns from existing components in the same file."})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Change component value:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:'(property "Value" "10k"   ;; Change to new value\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Add new component:"})," Copy existing symbol block from same file, then update:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"uuid"})," (generate new unique UUID)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"(at X Y rotation)"})," coordinates"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'(property "Reference" "R99"'})," - next available designator"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'(property "Value" "..."'})," - component value"]}),"\n",(0,t.jsx)(n.li,{children:"Pin UUIDs (generate new unique ones)"}),"\n",(0,t.jsx)(n.li,{children:"Instance path (copy from similar component, update reference)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Add wire:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:'(wire\n  (pts (xy X1 Y1) (xy X2 Y2))\n  (stroke (width 0) (type default))\n  (uuid "a1b2c3d4-e5f6-7890-abcd-ef1234567890")\n)\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Add net label:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:'(label "SIGNAL_NAME"\n  (at X Y rotation)\n  (effects (font (size 1.27 1.27)) (justify left bottom))\n  (uuid "a1b2c3d4-e5f6-7890-abcd-ef1234567890")\n)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"4-validate",children:"4. Validate"}),"\n",(0,t.jsx)(n.p,{children:"After editing:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Ensure all UUIDs are unique (36-char format, lowercase hex: ",(0,t.jsx)(n.code,{children:"a1b2c3d4-e5f6-7890-abcd-ef1234567890"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Check S-expression syntax (balanced parentheses)"}),"\n",(0,t.jsxs)(n.li,{children:["Verify library references exist (",(0,t.jsx)(n.code,{children:"lib_id"})," matches library in sym-lib-table)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Suggest user open in KiCad"})," to visually verify - Claude cannot confirm connectivity"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"For complex edits"}),": Recommend running KiCad ERC (Electrical Rules Check)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"project-discovery",children:"Project Discovery"}),"\n",(0,t.jsx)(n.p,{children:"For any KiCad project, find these key files:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"File"}),(0,t.jsx)(n.th,{children:"Purpose"}),(0,t.jsx)(n.th,{children:"Key Info"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"*.kicad_pro"})}),(0,t.jsx)(n.td,{children:"Project config"}),(0,t.jsx)(n.td,{children:"Project name, settings"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sym-lib-table"})}),(0,t.jsx)(n.td,{children:"Symbol libraries"}),(0,t.jsx)(n.td,{children:"Library names and paths"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"fp-lib-table"})}),(0,t.jsx)(n.td,{children:"Footprint libraries"}),(0,t.jsx)(n.td,{children:"Footprint library names"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["Root ",(0,t.jsx)(n.code,{children:".kicad_sch"})]}),(0,t.jsx)(n.td,{children:"Main schematic"}),(0,t.jsx)(n.td,{children:"Sheet UUIDs, hierarchy"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"*.kicad_sym"})}),(0,t.jsx)(n.td,{children:"Symbol definitions"}),(0,t.jsx)(n.td,{children:"Available component symbols"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Get library prefix"}),": Read ",(0,t.jsx)(n.code,{children:"sym-lib-table"})," to find ",(0,t.jsx)(n.code,{children:'(name "...")'})," - use as ",(0,t.jsx)(n.code,{children:"lib_id"})," prefix (e.g., ",(0,t.jsx)(n.code,{children:'"mylib:ComponentName"'}),")."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Get sheet UUID"}),": Read root schematic's ",(0,t.jsx)(n.code,{children:'(uuid "...")'})," field for root UUID. For sub-sheets, find ",(0,t.jsx)(n.code,{children:'(sheet ... (uuid "..."))'})," blocks."]}),"\n",(0,t.jsx)(n.h2,{id:"symbol-template",children:"Symbol Template"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"CRITICAL: Copy from existing component in same file first!"})," This ensures UUID format and other details match."]}),"\n",(0,t.jsx)(n.p,{children:"If creating from scratch, check the file's UUID format first (quoted vs unquoted), then use:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:'(symbol\n\t(lib_id "LIBRARY:SYMBOL_NAME")\n\t(at X Y ROTATION)\n\t(unit 1)\n\t(exclude_from_sim no)\n\t(in_bom yes)\n\t(on_board yes)\n\t(dnp no)\n\t(uuid UNIQUE-UUID-HERE)\n\t(property "Reference" "R1"\n\t\t(at X Y 0)\n\t\t(effects\n\t\t\t(font\n\t\t\t\t(size 1.27 1.27)\n\t\t\t)\n\t\t)\n\t)\n\t(property "Value" "10k"\n\t\t(at X Y 0)\n\t\t(effects\n\t\t\t(font\n\t\t\t\t(size 1.27 1.27)\n\t\t\t)\n\t\t)\n\t)\n\t(property "Footprint" "LIBRARY:FOOTPRINT"\n\t\t(at X Y 0)\n\t\t(effects\n\t\t\t(font\n\t\t\t\t(size 1.27 1.27)\n\t\t\t)\n\t\t\t(hide yes)\n\t\t)\n\t)\n\t(property "Datasheet" ""\n\t\t(at X Y 0)\n\t\t(effects\n\t\t\t(font\n\t\t\t\t(size 1.27 1.27)\n\t\t\t)\n\t\t\t(hide yes)\n\t\t)\n\t)\n\t(property "Description" ""\n\t\t(at X Y 0)\n\t\t(effects\n\t\t\t(font\n\t\t\t\t(size 1.27 1.27)\n\t\t\t)\n\t\t\t(hide yes)\n\t\t)\n\t)\n\t(pin "1"\n\t\t(uuid PIN1-UUID-HERE)\n\t)\n\t(pin "2"\n\t\t(uuid PIN2-UUID-HERE)\n\t)\n\t(instances\n\t\t(project ""\n\t\t\t(path "/ROOT-UUID"\n\t\t\t\t(reference "R1")\n\t\t\t\t(unit 1)\n\t\t\t)\n\t\t)\n\t)\n)\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Notes"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"UUID format"}),": Check existing file - use quoted ",(0,t.jsx)(n.code,{children:'"uuid"'})," or unquoted ",(0,t.jsx)(n.code,{children:"uuid"})," to match"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"PROJECT_NAME_OR_EMPTY"}),": Check existing components - usually ",(0,t.jsx)(n.code,{children:'""'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ROTATION"}),": 0, 90, 180, or 270 degrees"]}),"\n",(0,t.jsxs)(n.li,{children:["Pin count varies by component - check symbol definition in ",(0,t.jsx)(n.code,{children:".kicad_sym"})," file"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"power-symbols",children:"Power Symbols"}),"\n",(0,t.jsxs)(n.p,{children:["Use built-in ",(0,t.jsx)(n.code,{children:"power:"})," library:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:'(symbol\n  (lib_id "power:GND")\n  (at X Y 0)\n  (unit 1)\n  (exclude_from_sim no)\n  (in_bom yes)\n  (on_board yes)\n  (dnp no)\n  (fields_autoplaced yes)\n  (uuid "UNIQUE-UUID")\n  (property "Reference" "#PWR01" (at X Y 0) (effects (font (size 1.27 1.27)) (hide yes)))\n  (property "Value" "GND" (at X Y 0) (effects (font (size 1.27 1.27))))\n  (pin "1" (uuid "PIN-UUID"))\n  (instances\n    (project "..."\n      (path "/..." (reference "#PWR01") (unit 1))\n    )\n  )\n)\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Common power symbols: ",(0,t.jsx)(n.code,{children:"power:GND"}),", ",(0,t.jsx)(n.code,{children:"power:+5V"}),", ",(0,t.jsx)(n.code,{children:"power:+12V"}),", ",(0,t.jsx)(n.code,{children:"power:-12V"}),", ",(0,t.jsx)(n.code,{children:"power:VCC"}),", ",(0,t.jsx)(n.code,{children:"power:VDD"})]}),"\n",(0,t.jsx)(n.h2,{id:"coordinate-system",children:"Coordinate System"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Origin: top-left of page"}),"\n",(0,t.jsx)(n.li,{children:"Units: millimeters"}),"\n",(0,t.jsx)(n.li,{children:"Rotation: degrees (0, 90, 180, 270)"}),"\n",(0,t.jsx)(n.li,{children:"Grid: 2.54mm (0.1 inch) typical spacing"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Tip"}),": Look at nearby components for reasonable coordinates"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"reference-designators",children:"Reference Designators"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Prefix"}),(0,t.jsx)(n.th,{children:"Component"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"R"}),(0,t.jsx)(n.td,{children:"Resistors"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"C"}),(0,t.jsx)(n.td,{children:"Capacitors"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"L"}),(0,t.jsx)(n.td,{children:"Inductors"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"D"}),(0,t.jsx)(n.td,{children:"Diodes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"U"}),(0,t.jsx)(n.td,{children:"ICs/Modules"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"J"}),(0,t.jsx)(n.td,{children:"Connectors"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"TP"}),(0,t.jsx)(n.td,{children:"Test points"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"F"}),(0,t.jsx)(n.td,{children:"Fuses"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"#PWR"}),(0,t.jsx)(n.td,{children:"Power symbols (hidden)"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"limitations",children:"Limitations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Layout quality"}),": Components placed programmatically may overlap. User adjusts in KiCad GUI."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Wire routing"}),": Prefer net labels over complex wire routing for drafts."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Pin positions"}),": Estimated from symbol definitions; may need adjustment."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"critical-lib_symbols-section-kicad-90",children:"CRITICAL: lib_symbols Section (KiCad 9.0+)"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["When adding a NEW symbol type to a schematic, you MUST also add its definition to the ",(0,t.jsx)(n.code,{children:"lib_symbols"})," section."]})}),"\n",(0,t.jsxs)(n.p,{children:["KiCad caches symbol definitions inside the schematic file. If you add a symbol instance without adding its definition to ",(0,t.jsx)(n.code,{children:"lib_symbols"}),", the file will crash on open."]}),"\n",(0,t.jsx)(n.h3,{id:"how-to-add-a-new-symbol",children:"How to add a new symbol:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Copy symbol definition"})," from the ",(0,t.jsx)(n.code,{children:".kicad_sym"})," library file"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Add to lib_symbols"})," with library prefix (e.g., ",(0,t.jsx)(n.code,{children:'"zudo-bus:CL10B104KB8NNNC"'}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Add symbol instance"})," referencing the same lib_id"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example lib_symbols entry:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:'(lib_symbols\n\t(symbol "library-name:SymbolName"\n\t\t(exclude_from_sim no)\n\t\t(in_bom yes)\n\t\t(on_board yes)\n\t\t(property "Reference" "C"\n\t\t\t...\n\t\t)\n\t\t;; Copy entire symbol definition from .kicad_sym file\n\t\t;; Including all properties, graphics, and pins\n\t\t(embedded_fonts no)\n\t)\n)\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Notes"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Symbol name in lib_symbols must include library prefix: ",(0,t.jsx)(n.code,{children:'"library:Symbol"'})," not just ",(0,t.jsx)(n.code,{children:'"Symbol"'})]}),"\n",(0,t.jsxs)(n.li,{children:["Copy the ENTIRE symbol definition including all ",(0,t.jsx)(n.code,{children:'(symbol "Name_0_1" ...)'})," graphics blocks"]}),"\n",(0,t.jsxs)(n.li,{children:["Add ",(0,t.jsx)(n.code,{children:"(embedded_fonts no)"})," at the end of each symbol in lib_symbols"]}),"\n",(0,t.jsx)(n.li,{children:"If adding multiple symbols, each needs its own definition in lib_symbols"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"critical-format-matching",children:"CRITICAL: Format Matching"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"ALWAYS match the existing file's format exactly."})," Different KiCad projects may use slightly different S-expression styles. Key variations:"]}),"\n",(0,t.jsx)(n.h3,{id:"uuid-format-critical---causes-crashes-if-wrong",children:"UUID Format (CRITICAL - causes crashes if wrong!)"}),"\n",(0,t.jsx)(n.p,{children:"Check how UUIDs appear in the existing file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:';; Some projects use UNQUOTED UUIDs:\n(uuid 26efc87e-0264-438c-bf9f-152a5d6f0f11)\n\n;; Some projects use QUOTED UUIDs:\n(uuid "26efc87e-0264-438c-bf9f-152a5d6f0f11")\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"You MUST use the same format as existing UUIDs in the file!"})," Mixing formats causes KiCad to crash on open."]}),"\n",(0,t.jsx)(n.h3,{id:"pin-format",children:"Pin Format"}),"\n",(0,t.jsx)(n.p,{children:"Pins should have uuid on its own line:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:'(pin "1"\n\t(uuid 00000001-0001-0001-0001-000000000002)\n)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"instances-format",children:"Instances Format"}),"\n",(0,t.jsx)(n.p,{children:"The path should have reference and unit on separate lines:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:'(instances\n\t(project ""\n\t\t(path "/26efc87e-0264-438c-bf9f-152a5d6f0f11"\n\t\t\t(reference "C1")\n\t\t\t(unit 1)\n\t\t)\n\t)\n)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"text-elements",children:"Text Elements"}),"\n",(0,t.jsxs)(n.p,{children:["Text elements should NOT have ",(0,t.jsx)(n.code,{children:"(exclude_from_sim no)"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:';; CORRECT:\n(text "POWER INPUT"\n\t(at 25.4 25.4 0)\n\t(effects (font (size 3.81 3.81) (bold yes)))\n\t(uuid a0000001-0001-0001-0001-000000000001)\n)\n\n;; WRONG - causes crashes:\n(text "POWER INPUT"\n\t(exclude_from_sim no)  ;; <-- DO NOT ADD THIS TO TEXT\n\t(at 25.4 25.4 0)\n\t...\n)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"labels-format",children:"Labels Format"}),"\n",(0,t.jsx)(n.p,{children:"Net labels follow this format:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:'(label "SIGNAL_NAME"\n\t(at X Y rotation)\n\t(effects\n\t\t(font\n\t\t\t(size 1.27 1.27)\n\t\t)\n\t\t(justify left bottom)\n\t)\n\t(uuid c0000001-0001-0001-0001-000000000001)\n)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"sym-lib-table-required",children:"sym-lib-table Required"}),"\n",(0,t.jsxs)(n.p,{children:["If the project doesn't have a ",(0,t.jsx)(n.code,{children:"sym-lib-table"})," file, create one:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lisp",children:'(sym_lib_table\n  (version 7)\n  (lib (name "library-name")(type "KiCad")(uri "${KIPRJMOD}/symbols/library-name.kicad_sym")(options "")(descr ""))\n)\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["All libraries referenced by ",(0,t.jsx)(n.code,{children:"lib_id"})," in the schematic MUST be listed in sym-lib-table."]})}),"\n",(0,t.jsx)(n.h2,{id:"error-recovery",children:"Error Recovery"}),"\n",(0,t.jsx)(n.p,{children:"If schematic won't open in KiCad:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"KiCad crashes on open"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Check UUID format - must match existing file (quoted vs unquoted)"}),"\n",(0,t.jsxs)(n.li,{children:["Check text elements don't have ",(0,t.jsx)(n.code,{children:"(exclude_from_sim no)"})]}),"\n",(0,t.jsx)(n.li,{children:"Verify sym-lib-table exists and references all used libraries"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Parenthesis mismatch"}),": Check line-by-line for missing ",(0,t.jsx)(n.code,{children:")"}),". Common: deleted symbol block with dangling reference."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Invalid UUID"}),": Must be exactly 36 chars, lowercase hex (0-9, a-f). Quick fix: copy existing UUID and change last 4 digits."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Missing lib_id"}),": Symbol not in library. Check:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"sym-lib-table"})," file exists"]}),"\n",(0,t.jsx)(n.li,{children:"Library is listed in sym-lib-table"}),"\n",(0,t.jsxs)(n.li,{children:["Symbol name exists in the ",(0,t.jsx)(n.code,{children:".kicad_sym"})," file"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Revert changes"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git checkout -- path/to/file.kicad_sch\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Required properties"}),": Reference, Value, Footprint (Datasheet and Description recommended)."]}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/claude/skills/kicad-sch-tweak/kicad-sch-format",children:"KiCad Schematic File Format Reference"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);