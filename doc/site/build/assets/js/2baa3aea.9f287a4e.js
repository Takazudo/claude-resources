"use strict";(self.webpackChunkclaude_code_doc_site=self.webpackChunkclaude_code_doc_site||[]).push([[5151],{645(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"claude/commands/local-review","title":"/local-review","description":"Perform code quality review focused on structure, refactoring, and best practices.","source":"@site/docs/claude/commands/local-review.mdx","sourceDirName":"claude/commands","slug":"/claude/commands/local-review","permalink":"/docs/claude/commands/local-review","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"title":"/local-review","description":"Perform code quality review focused on structure, refactoring, and best practices."},"sidebar":"claudeSidebar","previous":{"title":"/lazy-dev","permalink":"/docs/claude/commands/lazy-dev"},"next":{"title":"/next-todo","permalink":"/docs/claude/commands/next-todo"}}');var r=i(7900),t=i(3351);const l={title:"/local-review",description:"Perform code quality review focused on structure, refactoring, and best practices."},c="/local-review",a={},o=[{value:"Review Process",id:"review-process",level:2},{value:"Step 1: Determine Base Branch",id:"step-1-determine-base-branch",level:3},{value:"Step 2: Run Parallel Reviews",id:"step-2-run-parallel-reviews",level:3},{value:"Step 3: Synthesize Review Results",id:"step-3-synthesize-review-results",level:3},{value:"Step 4: Present Findings to User",id:"step-4-present-findings-to-user",level:3},{value:"Step 5: Apply Fixes",id:"step-5-apply-fixes",level:3},{value:"Step 6: Commit Changes",id:"step-6-commit-changes",level:3},{value:"Important Notes",id:"important-notes",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"local-review",children:"/local-review"})}),"\n",(0,r.jsx)(n.h1,{id:"local-review-1",children:"Local Review"}),"\n",(0,r.jsx)(n.p,{children:"Perform a practical code quality review with priorities:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"PRIMARY FOCUS (most important):"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Silly mistakes and bugs"}),"\n",(0,r.jsx)(n.li,{children:"Refactoring opportunities"}),"\n",(0,r.jsx)(n.li,{children:"Structural and architectural issues"}),"\n",(0,r.jsx)(n.li,{children:"File organization and naming"}),"\n",(0,r.jsx)(n.li,{children:"Better coding patterns and practices"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"SECONDARY FOCUS (still useful to point out):"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Security issues (XSS, injection, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"Validation concerns"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"review-process",children:"Review Process"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-determine-base-branch",children:"Step 1: Determine Base Branch"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CRITICAL: Always confirm the correct base branch before reviewing to avoid wasting time on wrong diffs."})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Check if current branch has an existing PR:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gh pr view --json baseRefName,headRefName,number,title 2>/dev/null\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"If PR exists:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use the PR's ",(0,r.jsx)(n.code,{children:"baseRefName"})," as the base branch for diff"]}),"\n",(0,r.jsxs)(n.li,{children:['Report to user: "Found PR #X targeting ',(0,r.jsx)(n.code,{children:"base-branch"}),', reviewing changes against that branch"']}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"If no PR exists:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fall back to default branch (main/master)"}),"\n",(0,r.jsx)(n.li,{children:"Or ask user which branch to compare against if unclear"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Get the diff against the correct base branch:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git diff <base-branch>...HEAD\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This ensures reviewers analyze only the relevant changes for this PR/feature branch."}),"\n",(0,r.jsx)(n.h3,{id:"step-2-run-parallel-reviews",children:"Step 2: Run Parallel Reviews"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"IMPORTANT: Run ALL reviews in PARALLEL using a single response with multiple tool calls"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Use Task tool with ",(0,r.jsx)(n.code,{children:'subagent_type: "code-reviewer"'})," and ",(0,r.jsx)(n.code,{children:'model: "opus"'})," THREE times in parallel"]})}),"\n",(0,r.jsx)(n.p,{children:"Each reviewer should focus on different aspects to get comprehensive coverage:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Reviewer 1: Bugs & Logic"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Review the code changes focusing on:\n\nPRIMARY FOCUS:\n1. Silly mistakes and bugs (logic errors, typos, incorrect implementations)\n2. Missing null checks, off-by-one errors\n3. Incorrect API usage, broken functionality\n4. Error handling issues\n\nProvide specific, actionable feedback with code examples.\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Reviewer 2: Structure & Refactoring"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Review the code changes focusing on:\n\nPRIMARY FOCUS:\n1. Code duplication (DRY violations)\n2. Overly complex code that can be simplified\n3. Structural and architectural issues\n4. Component organization and hierarchy\n5. State management problems\n6. File organization and naming\n7. Better abstractions or patterns\n\nProvide specific, actionable feedback with code examples.\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Reviewer 3: Quality & Best Practices"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Review the code changes focusing on:\n\nPRIMARY FOCUS:\n1. Type safety and TypeScript usage\n2. Performance (React re-renders, memoization)\n3. Accessibility issues\n4. Code readability and maintainability\n5. Better coding patterns\n\nSECONDARY:\n- Security issues (XSS, injection, validation)\n\nProvide specific, actionable feedback with code examples.\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CRITICAL: Launch all 3 code-reviewer subagents in PARALLEL in a single message using Opus model"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-synthesize-review-results",children:"Step 3: Synthesize Review Results"}),"\n",(0,r.jsx)(n.p,{children:"After receiving ALL 3 review results from code-reviewer subagents:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Merge and deduplicate findings"})," from all reviewers"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Categorize all findings by priority"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Identify useful fixes"})," that can be implemented"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Note reviewer consensus"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-4-present-findings-to-user",children:"Step 4: Present Findings to User"}),"\n",(0,r.jsx)(n.p,{children:"Present a clear summary synthesized from all 3 reviewers."}),"\n",(0,r.jsx)(n.h3,{id:"step-5-apply-fixes",children:"Step 5: Apply Fixes"}),"\n",(0,r.jsxs)(n.p,{children:["For ",(0,r.jsx)(n.strong,{children:"High Priority"})," fixes:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Implement automatically without asking"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For ",(0,r.jsx)(n.strong,{children:"Medium Priority"})," fixes:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If clearly useful and safe -> implement"}),"\n",(0,r.jsx)(n.li,{children:"If uncertain about value/impact -> ask user"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For ",(0,r.jsx)(n.strong,{children:"Low Priority"})," fixes:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ask user if they want these implemented"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-6-commit-changes",children:"Step 6: Commit Changes"}),"\n",(0,r.jsx)(n.p,{children:"After applying fixes:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Run type check: ",(0,r.jsx)(n.code,{children:"npm run typeCheck"})]}),"\n",(0,r.jsx)(n.li,{children:"Create a descriptive commit message listing all fixes"}),"\n",(0,r.jsx)(n.li,{children:"Use the standard commit format with footer"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CRITICAL:"})," All 3 reviews MUST be launched in parallel in a single message using Opus model"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Primary focus:"})," Code quality, structure, refactoring (spend most effort here)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Secondary focus:"})," Security issues (point out if found, but not the main focus)"]}),"\n",(0,r.jsx)(n.li,{children:"Focus on practical, actionable improvements"}),"\n",(0,r.jsx)(n.li,{children:"Don't implement speculative changes without asking"}),"\n",(0,r.jsx)(n.li,{children:"Skip fixes requiring backend/infrastructure changes"}),"\n",(0,r.jsx)(n.li,{children:"Prioritize: silly mistakes -> refactoring -> structure -> security"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},3351(e,n,i){i.d(n,{R:()=>l,x:()=>c});var s=i(2128);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);