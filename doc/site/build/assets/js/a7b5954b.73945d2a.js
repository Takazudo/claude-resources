"use strict";(self.webpackChunkclaude_code_doc_site=self.webpackChunkclaude_code_doc_site||[]).push([[3652],{3351(e,n,r){r.d(n,{R:()=>c,x:()=>a});var t=r(2128);const i={},s=t.createContext(i);function c(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(s.Provider,{value:n},e.children)}},9391(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"claude/commands/pr","title":"/pr","description":"Create a pull request with intelligent base branch detection.","source":"@site/docs/claude/commands/pr.mdx","sourceDirName":"claude/commands","slug":"/claude/commands/pr","permalink":"/docs/claude/commands/pr","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"title":"/pr","description":"Create a pull request with intelligent base branch detection."},"sidebar":"claudeSidebar","previous":{"title":"/next-todo","permalink":"/docs/claude/commands/next-todo"},"next":{"title":"/pr-complete","permalink":"/docs/claude/commands/pr-complete"}}');var i=r(7900),s=r(3351);const c={title:"/pr",description:"Create a pull request with intelligent base branch detection."},a="/pr",l={},o=[{value:"Usage",id:"usage",level:2},{value:"Steps",id:"steps",level:2},{value:"1. Verify Current State",id:"1-verify-current-state",level:3},{value:"2. Determine Base Branch",id:"2-determine-base-branch",level:3},{value:"Conversation History Check",id:"conversation-history-check",level:4},{value:"Git History Detection",id:"git-history-detection",level:4},{value:"Repository Default Fallback",id:"repository-default-fallback",level:4},{value:"3. Check for Existing PR",id:"3-check-for-existing-pr",level:3},{value:"4. Analyze Changes",id:"4-analyze-changes",level:3},{value:"5. Confirm with User",id:"5-confirm-with-user",level:3},{value:"6. Push and Create PR",id:"6-push-and-create-pr",level:3},{value:"7. Report Result",id:"7-report-result",level:3},{value:"Detection Logic",id:"detection-logic",level:2},{value:"Important Notes",id:"important-notes",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"pr",children:"/pr"})}),"\n",(0,i.jsx)(n.h1,{id:"pr-command",children:"PR Command"}),"\n",(0,i.jsx)(n.p,{children:"Create a pull request with automatic base branch detection from conversation history, git log, or repository default."}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"/pr"})," - Create PR with auto-detected base branch"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"/pr &lt;target-branch&gt;"})," - Create PR targeting the specified branch"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"steps",children:"Steps"}),"\n",(0,i.jsx)(n.h3,{id:"1-verify-current-state",children:"1. Verify Current State"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git status\ngit branch --show-current\n"})}),"\n",(0,i.jsx)(n.p,{children:"Ensure you're on a feature branch (not main/master/develop)."}),"\n",(0,i.jsx)(n.h3,{id:"2-determine-base-branch",children:"2. Determine Base Branch"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Priority order for base branch detection:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Explicit argument"}),": If ",(0,i.jsx)(n.code,{children:"&lt;target-branch&gt;"})," is provided, use it directly"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Conversation context"}),": Search conversation history for mentions of:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'"based on", "branch from", "create branch from"'}),"\n",(0,i.jsx)(n.li,{children:"PR context or issue references that mention a target branch"}),"\n",(0,i.jsx)(n.li,{children:"Recent git commands showing branch creation"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Git history"}),": Auto-detect from git log and merge-base"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Repository default"}),": Use the default branch as fallback"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"conversation-history-check",children:"Conversation History Check"}),"\n",(0,i.jsx)(n.p,{children:"Search the current conversation for clues about the base branch:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Look for phrases like "create branch from develop", "based on feature-x"'}),"\n",(0,i.jsx)(n.li,{children:"Check if user mentioned which branch they started from"}),"\n",(0,i.jsx)(n.li,{children:"Look for issue/PR context that indicates the target"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"git-history-detection",children:"Git History Detection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Fetch latest remote refs\ngit fetch origin\n\n# Find merge-base with candidate branches\nfor branch in main master develop staging; do\n  git merge-base HEAD origin/$branch 2>/dev/null && echo "Found: $branch"\ndone\n\n# Check which branch has the closest merge-base\n# The branch with most recent common ancestor is likely the parent\n'})}),"\n",(0,i.jsx)(n.h4,{id:"repository-default-fallback",children:"Repository Default Fallback"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Get the default branch\ngh repo view --json defaultBranchRef --jq '.defaultBranchRef.name'\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-check-for-existing-pr",children:"3. Check for Existing PR"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"gh pr list --head $(git branch --show-current)\n"})}),"\n",(0,i.jsx)(n.p,{children:"If PR exists, ask user if they want to view or update it."}),"\n",(0,i.jsx)(n.h3,{id:"4-analyze-changes",children:"4. Analyze Changes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Get commits\ngit log origin/<base-branch>..HEAD --oneline\n\n# Get file changes\ngit diff origin/<base-branch>..HEAD --stat\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-confirm-with-user",children:"5. Confirm with User"}),"\n",(0,i.jsx)(n.p,{children:"Before creating, confirm:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Current branch"}),": ",(0,i.jsx)(n.code,{children:"&lt;branch-name&gt;"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Target base branch"}),": ",(0,i.jsx)(n.code,{children:"&lt;base-branch&gt;"}),' (with detection method: "specified", "from conversation", "auto-detected", or "default")']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Commits"}),": Number of commits to include"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Suggested PR title"}),": Based on commits/branch name"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"6-push-and-create-pr",children:"6. Push and Create PR"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Push if needed\ngit push -u origin $(git branch --show-current)\n\n# Create PR\ngh pr create \\\n  --base <base-branch> \\\n  --title "<title>" \\\n  --body "$(cat <<\'EOF\'\n## Summary\n<description>\n\n## Changes\n- <change 1>\n- <change 2>\n\n## Test Plan\n<testing instructions>\n\n\ud83e\udd16 Generated with [Claude Code](https://claude.com/claude-code)\nEOF\n)"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"7-report-result",children:"7. Report Result"}),"\n",(0,i.jsx)(n.p,{children:"Display:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"PR URL"}),"\n",(0,i.jsx)(n.li,{children:"PR number"}),"\n",(0,i.jsx)(n.li,{children:"Base branch (and how it was determined)"}),"\n",(0,i.jsx)(n.li,{children:"Head branch"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"detection-logic",children:"Detection Logic"}),"\n",(0,i.jsx)(n.p,{children:"The command uses this logic to find the base branch:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User-specified"}),": Highest priority - use the argument directly"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Conversation analysis"}),": Check conversation for branch context"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Git merge-base"}),": Find closest common ancestor with candidate branches"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Default branch"}),": Ultimate fallback using ",(0,i.jsx)(n.code,{children:"gh repo view"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If detection is ambiguous, ask the user to clarify before creating the PR."}),"\n",(0,i.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Never assume main/master without verification"}),"\n",(0,i.jsx)(n.li,{children:"Always inform user how the base branch was determined"}),"\n",(0,i.jsx)(n.li,{children:"Verify branch is pushed before creating PR"}),"\n",(0,i.jsx)(n.li,{children:"Include meaningful PR title and description"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);