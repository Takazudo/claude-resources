"use strict";(self.webpackChunkclaude_code_doc_site=self.webpackChunkclaude_code_doc_site||[]).push([[7149],{3351(e,n,t){t.d(n,{R:()=>c,x:()=>a});var r=t(2128);const i={},s=r.createContext(i);function c(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(s.Provider,{value:n},e.children)}},8694(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>o,frontMatter:()=>c,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"claude/commands/pr-create","title":"/pr-create","description":"Create a pull request with automatic base branch detection.","source":"@site/docs/claude/commands/pr-create.mdx","sourceDirName":"claude/commands","slug":"/claude/commands/pr-create","permalink":"/docs/claude/commands/pr-create","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"title":"/pr-create","description":"Create a pull request with automatic base branch detection."},"sidebar":"claudeSidebar","previous":{"title":"/pr-complete","permalink":"/docs/claude/commands/pr-complete"},"next":{"title":"/pr-make-suggestion-edit","permalink":"/docs/claude/commands/pr-make-suggestion-edit"}}');var i=t(7900),s=t(3351);const c={title:"/pr-create",description:"Create a pull request with automatic base branch detection."},a="/pr-create",l={},h=[{value:"Usage",id:"usage",level:2},{value:"Steps",id:"steps",level:2},{value:"1. Check Current State",id:"1-check-current-state",level:3},{value:"2. Determine the Base Branch",id:"2-determine-the-base-branch",level:3},{value:"3. Check for Existing PR",id:"3-check-for-existing-pr",level:3},{value:"4. Prepare PR Content",id:"4-prepare-pr-content",level:3},{value:"5. Confirm with User",id:"5-confirm-with-user",level:3},{value:"6. Create the PR",id:"6-create-the-pr",level:3},{value:"7. Report Result",id:"7-report-result",level:3},{value:"Important Notes",id:"important-notes",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"pr-create",children:"/pr-create"})}),"\n",(0,i.jsx)(n.h1,{id:"pr-create-command",children:"PR Create Command"}),"\n",(0,i.jsx)(n.p,{children:"Create a pull request by automatically detecting the correct base branch from git history."}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"/pr-create"})," - Create PR with auto-detected base branch"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"/pr-create &lt;target-branch&gt;"})," - Create PR targeting the specified branch"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"steps",children:"Steps"}),"\n",(0,i.jsx)(n.h3,{id:"1-check-current-state",children:"1. Check Current State"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"git status"})," to verify you're on a feature branch (not main/master/develop)"]}),"\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"git branch --show-current"})," to get the current branch name"]}),"\n",(0,i.jsx)(n.li,{children:"Ensure there are commits to create a PR for"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-determine-the-base-branch",children:"2. Determine the Base Branch"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"If target branch is explicitly provided:"})," Use the specified branch as the base branch. Skip auto-detection."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"If no target branch provided:"})," Auto-detect which branch the current branch was created from."]}),"\n",(0,i.jsx)(n.p,{children:"Use git to find the merge-base and identify the parent branch:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Get list of remote branches\ngit fetch origin\n\n# Find the most likely parent branch by checking merge-base with common branches\n# Check against main, master, develop, and other long-lived branches\n"})}),"\n",(0,i.jsx)(n.p,{children:"Strategy to detect base branch:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Get the first commit of the current branch that's not in any other branch"}),"\n",(0,i.jsx)(n.li,{children:"Find which branch that commit's parent is reachable from"}),"\n",(0,i.jsx)(n.li,{children:"Common approach: compare merge-base distance with candidate branches"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# For each candidate branch (main, master, develop, etc.):\ngit merge-base <current-branch> origin/<candidate-branch>\n\n# The branch with the closest merge-base (most recent common ancestor)\n# is likely the parent branch\n"})}),"\n",(0,i.jsx)(n.p,{children:"Alternative method using git log:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Show the branch point\ngit log --oneline --graph --decorate -20\n\n# Find where current branch diverged\ngit log --oneline origin/main..HEAD\ngit log --oneline origin/develop..HEAD\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"IMPORTANT:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If the branch was created from a feature branch (not main/develop), detect that"}),"\n",(0,i.jsx)(n.li,{children:"Always verify with the user if the detected base branch looks incorrect"}),"\n",(0,i.jsxs)(n.li,{children:["Never assume ",(0,i.jsx)(n.code,{children:"main"})," or ",(0,i.jsx)(n.code,{children:"master"})," - always detect from history"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-check-for-existing-pr",children:"3. Check for Existing PR"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"gh pr list --head <current-branch>\n"})}),"\n",(0,i.jsx)(n.p,{children:"If a PR already exists, inform the user and ask if they want to view or update it."}),"\n",(0,i.jsx)(n.h3,{id:"4-prepare-pr-content",children:"4. Prepare PR Content"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"git log origin/&lt;base-branch&gt;..HEAD --oneline"})," to see all commits"]}),"\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"git diff origin/&lt;base-branch&gt;..HEAD --stat"})," to see changed files"]}),"\n",(0,i.jsx)(n.li,{children:"Analyze the changes to suggest a PR title and description"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"5-confirm-with-user",children:"5. Confirm with User"}),"\n",(0,i.jsx)(n.p,{children:"Before creating the PR, confirm:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Current branch:"})," ",(0,i.jsx)(n.code,{children:"&lt;branch-name&gt;"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Base branch (target):"})," ",(0,i.jsx)(n.code,{children:"&lt;base-branch&gt;"})," (user-specified or auto-detected)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Commits to be included:"})," List of commits"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Suggested title:"})," Based on commit messages or branch name"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Ask the user to confirm or modify these values."}),"\n",(0,i.jsx)(n.h3,{id:"6-create-the-pr",children:"6. Create the PR"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'gh pr create \\\n  --base <base-branch> \\\n  --title "<pr-title>" \\\n  --body "$(cat <<\'EOF\'\n## Summary\n<brief description of changes>\n\n## Changes\n<list of main changes>\n\n## Test Plan\n<how to test the changes>\nEOF\n)"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"7-report-result",children:"7. Report Result"}),"\n",(0,i.jsx)(n.p,{children:"After PR creation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Display the PR URL"}),"\n",(0,i.jsx)(n.li,{children:"Show PR number"}),"\n",(0,i.jsx)(n.li,{children:"Confirm base branch and head branch"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User-specified target branch takes priority"})," - if provided, use it directly"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Auto-detect the base branch from git history"})," when not specified - never default to main/master"]}),"\n",(0,i.jsx)(n.li,{children:"If detection is ambiguous, ask the user to specify"}),"\n",(0,i.jsx)(n.li,{children:"Verify the current branch has been pushed to origin before creating PR"}),"\n",(0,i.jsxs)(n.li,{children:["If not pushed, push with ",(0,i.jsx)(n.code,{children:"git push -u origin &lt;branch-name&gt;"})," first"]}),"\n",(0,i.jsx)(n.li,{children:"Include meaningful PR title and description based on the changes"}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);