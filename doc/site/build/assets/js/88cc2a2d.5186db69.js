"use strict";(self.webpackChunkclaude_code_doc_site=self.webpackChunkclaude_code_doc_site||[]).push([[2800],{3351(e,r,n){n.d(r,{R:()=>o,x:()=>a});var t=n(2128);const s={},i=t.createContext(s);function o(e){const r=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:r},e.children)}},4998(e,r,n){n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"claude/skills/git-worktree-develop","title":"git-worktree-develop","description":"Parallel multi-topic development using git worktrees with a base branch strategy. Use when: (1) User wants to work on multiple related features in parallel, (2) User mentions \'worktree\', \'base branch\'...","source":"@site/docs/claude/skills/git-worktree-develop.mdx","sourceDirName":"claude/skills","slug":"/claude/skills/git-worktree-develop","permalink":"/docs/claude/skills/git-worktree-develop","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"title":"git-worktree-develop","description":"Parallel multi-topic development using git worktrees with a base branch strategy. Use when: (1) User wants to work on multiple related features in parallel, (2) User mentions \'worktree\', \'base branch\'..."},"sidebar":"claudeSidebar","previous":{"title":"gh-actions-doc-auto-merge-develop","permalink":"/docs/claude/skills/gh-actions-doc-auto-merge-develop"},"next":{"title":"headless-browser","permalink":"/docs/claude/skills/headless-browser"}}');var s=n(7900),i=n(3351);const o={title:"git-worktree-develop",description:"Parallel multi-topic development using git worktrees with a base branch strategy. Use when: (1) User wants to work on multiple related features in parallel, (2) User mentions 'worktree', 'base branch'..."},a="git-worktree-develop",c={},l=[{value:"Architecture",id:"architecture",level:2},{value:"Roles",id:"roles",level:2},{value:"Manager Session (root repo)",id:"manager-session-root-repo",level:3},{value:"Child Sessions (worktree dirs)",id:"child-sessions-worktree-dirs",level:3},{value:"Manager Workflow",id:"manager-workflow",level:2},{value:"Step 1: Create Base Branch",id:"step-1-create-base-branch",level:3},{value:"Step 2: Create Worktrees",id:"step-2-create-worktrees",level:3},{value:"Step 3: Environment Setup (if needed)",id:"step-3-environment-setup-if-needed",level:3},{value:"Step 4: Launch Child Sessions",id:"step-4-launch-child-sessions",level:3},{value:"Step 5: Review and Merge Topic PRs",id:"step-5-review-and-merge-topic-prs",level:3},{value:"Step 6: Create Root PR",id:"step-6-create-root-pr",level:3},{value:"Step 7: Cleanup",id:"step-7-cleanup",level:3},{value:"Child Session Workflow",id:"child-session-workflow",level:2},{value:"Step 1: Verify Branch",id:"step-1-verify-branch",level:3},{value:"Step 2: Implement",id:"step-2-implement",level:3},{value:"Step 3: Push and Create PR",id:"step-3-push-and-create-pr",level:3},{value:"Branch Naming Conventions",id:"branch-naming-conventions",level:2},{value:"Important Rules",id:"important-rules",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Reference",id:"quick-reference",level:2}];function d(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"git-worktree-develop",children:"git-worktree-develop"})}),"\n",(0,s.jsx)(r.h1,{id:"git-worktree-multi-topic-development",children:"Git Worktree Multi-Topic Development"}),"\n",(0,s.jsx)(r.p,{children:"Coordinate parallel development of multiple related features using git worktrees, a shared base branch, and manager/child Claude Code sessions."}),"\n",(0,s.jsx)(r.h2,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"main (default branch)\n  \u2514\u2500\u2500 base/<project-name>  (base branch, created by manager)\n        \u251c\u2500\u2500 <project-name>/topicA  (child branch \u2192 PR into base)\n        \u251c\u2500\u2500 <project-name>/topicB  (child branch \u2192 PR into base)\n        \u2514\u2500\u2500 <project-name>/topicC  (child branch \u2192 PR into base)\n\nworktrees/\n  \u251c\u2500\u2500 <topicA>/  (worktree for topicA branch)\n  \u251c\u2500\u2500 <topicB>/  (worktree for topicB branch)\n  \u2514\u2500\u2500 <topicC>/  (worktree for topicC branch)\n"})}),"\n",(0,s.jsx)(r.p,{children:"Each topic gets its own worktree directory, its own branch, and its own PR targeting the base branch. The manager merges topic PRs into the base branch, then creates one root PR from base into main."}),"\n",(0,s.jsx)(r.h2,{id:"roles",children:"Roles"}),"\n",(0,s.jsx)(r.h3,{id:"manager-session-root-repo",children:"Manager Session (root repo)"}),"\n",(0,s.jsx)(r.p,{children:"The manager session operates from the repo root directory. It:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"Creates the base branch from main"}),"\n",(0,s.jsx)(r.li,{children:"Creates worktrees for each topic"}),"\n",(0,s.jsx)(r.li,{children:"Reviews and merges topic PRs into the base branch"}),"\n",(0,s.jsx)(r.li,{children:"Creates the final root PR (base \u2192 main)"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"child-sessions-worktree-dirs",children:"Child Sessions (worktree dirs)"}),"\n",(0,s.jsx)(r.p,{children:"Each child session operates from its own worktree directory. It:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"Implements its assigned topic"}),"\n",(0,s.jsx)(r.li,{children:"Commits and pushes to its topic branch"}),"\n",(0,s.jsx)(r.li,{children:"Creates a PR targeting the base branch"}),"\n",(0,s.jsx)(r.li,{children:"Addresses review feedback from the manager"}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"manager-workflow",children:"Manager Workflow"}),"\n",(0,s.jsx)(r.h3,{id:"step-1-create-base-branch",children:"Step 1: Create Base Branch"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Ensure main is up to date\ngit checkout main\ngit pull origin main\n\n# Create and push the base branch\ngit checkout -b base/<project-name>\ngit push -u origin base/<project-name>\n\n# Return to main\ngit checkout main\n"})}),"\n",(0,s.jsx)(r.h3,{id:"step-2-create-worktrees",children:"Step 2: Create Worktrees"}),"\n",(0,s.jsx)(r.p,{children:"For each topic:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Create worktree with a topic branch based on the base branch\ngit worktree add worktrees/<topic-name> -b <project-name>/<topic-name> base/<project-name>\n"})}),"\n",(0,s.jsx)(r.p,{children:"Example with 3 topics:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"git worktree add worktrees/topicA -b marker-fix/topicA base/marker-fix\ngit worktree add worktrees/topicB -b marker-fix/topicB base/marker-fix\ngit worktree add worktrees/topicC -b marker-fix/topicC base/marker-fix\n"})}),"\n",(0,s.jsx)(r.h3,{id:"step-3-environment-setup-if-needed",children:"Step 3: Environment Setup (if needed)"}),"\n",(0,s.jsx)(r.p,{children:"If the project has environment files, symlink them into each worktree:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'for wt in worktrees/*/; do\n  ln -sf "$(pwd)/.env" "$wt/.env" 2>/dev/null\n  # Add project-specific symlinks as needed (e.g., metadata, generated files)\ndone\n'})}),"\n",(0,s.jsx)(r.p,{children:"If using pnpm workspaces, install dependencies in each worktree:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'for wt in worktrees/*/; do\n  (cd "$wt" && pnpm install)\ndone\n'})}),"\n",(0,s.jsx)(r.h3,{id:"step-4-launch-child-sessions",children:"Step 4: Launch Child Sessions"}),"\n",(0,s.jsx)(r.p,{children:"Tell the user to start a new Claude Code session in each worktree directory:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"cd worktrees/<topic-name>\nclaude\n"})}),"\n",(0,s.jsx)(r.p,{children:"Or use Claude Code teams with the Task tool to spawn child agents in each worktree."}),"\n",(0,s.jsx)(r.h3,{id:"step-5-review-and-merge-topic-prs",children:"Step 5: Review and Merge Topic PRs"}),"\n",(0,s.jsx)(r.p,{children:"As child sessions complete work and create PRs:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Review each topic PR\ngh pr view <pr-number>\ngh pr diff <pr-number>\n\n# Merge topic PRs into base branch (regular merge, not squash)\ngh pr merge <pr-number>\n"})}),"\n",(0,s.jsx)(r.h3,{id:"step-6-create-root-pr",children:"Step 6: Create Root PR"}),"\n",(0,s.jsx)(r.p,{children:"After all topics are merged into the base branch:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'# Create the root PR: base \u2192 main\ngh pr create --base main --head base/<project-name> \\\n  --title "Root PR title" \\\n  --body "$(cat <<\'EOF\'\n## Summary\n- Merged topicA: description\n- Merged topicB: description\n- Merged topicC: description\n\n## Topic PRs\n- #N topicA\n- #N topicB\n- #N topicC\nEOF\n)"\n'})}),"\n",(0,s.jsx)(r.h3,{id:"step-7-cleanup",children:"Step 7: Cleanup"}),"\n",(0,s.jsx)(r.p,{children:"After the root PR is merged:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'# Remove worktrees\nfor wt in worktrees/*/; do\n  git worktree remove "$wt"\ndone\n\n# Delete local and remote topic branches\ngit branch -d <project-name>/topicA <project-name>/topicB <project-name>/topicC\ngit push origin --delete <project-name>/topicA <project-name>/topicB <project-name>/topicC\n\n# Delete base branch\ngit branch -d base/<project-name>\ngit push origin --delete base/<project-name>\n'})}),"\n",(0,s.jsx)(r.h2,{id:"child-session-workflow",children:"Child Session Workflow"}),"\n",(0,s.jsx)(r.h3,{id:"step-1-verify-branch",children:"Step 1: Verify Branch"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"git branch --show-current\n# Should show: <project-name>/<topic-name>\n"})}),"\n",(0,s.jsx)(r.h3,{id:"step-2-implement",children:"Step 2: Implement"}),"\n",(0,s.jsx)(r.p,{children:"Work normally \u2014 edit files, run tests, commit."}),"\n",(0,s.jsx)(r.h3,{id:"step-3-push-and-create-pr",children:"Step 3: Push and Create PR"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'git push -u origin <project-name>/<topic-name>\n\n# Create PR targeting the base branch\ngh pr create --base base/<project-name> \\\n  --title "Topic: description" \\\n  --body "Description of changes"\n'})}),"\n",(0,s.jsx)(r.h2,{id:"branch-naming-conventions",children:"Branch Naming Conventions"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Pattern"}),(0,s.jsx)(r.th,{children:"Example"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Base branch"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"base/&lt;project&gt;"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"base/marker-fix"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Topic branch"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"&lt;project&gt;/&lt;topic&gt;"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"marker-fix/bogaudio-knobs"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Worktree dir"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"worktrees/&lt;topic&gt;"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"worktrees/bogaudio-knobs"})})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"important-rules",children:"Important Rules"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Always pull main before creating the base branch"})," \u2014 stale bases cause conflicts"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Never force push"})," \u2014 regular merge only, preserves history"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Topic PRs target the base branch"}),", not main"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Root PR targets main"})," from the base branch"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"worktrees/ must be in .gitignore"})," \u2014 worktrees are local only"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Manager session stays at repo root"})," \u2014 never cd into worktrees for git ops"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Each child session stays in its worktree"})," \u2014 git ops affect that branch only"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"worktrees/"})," in ",(0,s.jsx)(r.code,{children:".gitignore"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"gh"})," CLI authenticated"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"git"})," version 2.15+ (worktree support)"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'# Manager: full setup\ngit checkout main && git pull origin main\ngit checkout -b base/my-project && git push -u origin base/my-project && git checkout main\ngit worktree add worktrees/topic1 -b my-project/topic1 base/my-project\ngit worktree add worktrees/topic2 -b my-project/topic2 base/my-project\n\n# Child: push and PR\ngit push -u origin my-project/topic1\ngh pr create --base base/my-project --title "Topic1: description"\n\n# Manager: merge topics and create root PR\ngh pr merge <topic1-pr> && gh pr merge <topic2-pr>\ngh pr create --base main --head base/my-project --title "My Project: root PR"\n\n# Manager: cleanup after root PR merged\ngit worktree remove worktrees/topic1 && git worktree remove worktrees/topic2\n'})})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);