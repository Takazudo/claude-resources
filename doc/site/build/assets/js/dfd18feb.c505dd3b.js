"use strict";(self.webpackChunkclaude_code_doc_site=self.webpackChunkclaude_code_doc_site||[]).push([[7111],{3351(e,n,r){r.d(n,{R:()=>i,x:()=>a});var s=r(2128);const t={},l=s.createContext(t);function i(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(l.Provider,{value:n},e.children)}},4171(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"claude/skills/electron-develop","title":"electron-develop","description":"Electron app development patterns, especially with electron-tabs for browser-like tabs. Use when: (1) Building Electron apps with tabs, (2) Using electron-tabs library, (3) Implementing keyboard short...","source":"@site/docs/claude/skills/electron-develop.mdx","sourceDirName":"claude/skills","slug":"/claude/skills/electron-develop","permalink":"/docs/claude/skills/electron-develop","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"title":"electron-develop","description":"Electron app development patterns, especially with electron-tabs for browser-like tabs. Use when: (1) Building Electron apps with tabs, (2) Using electron-tabs library, (3) Implementing keyboard short..."},"sidebar":"claudeSidebar","previous":{"title":"easyeda2kicad","permalink":"/docs/claude/skills/easyeda2kicad"},"next":{"title":"Background Process & Dev Server","permalink":"/docs/claude/skills/electron-develop/background-process"}}');var t=r(7900),l=r(3351);const i={title:"electron-develop",description:"Electron app development patterns, especially with electron-tabs for browser-like tabs. Use when: (1) Building Electron apps with tabs, (2) Using electron-tabs library, (3) Implementing keyboard short..."},a="electron-develop",o={},c=[{value:"Common Pattern: Thin Wrapper App",id:"common-pattern-thin-wrapper-app",level:2},{value:"Packaging &amp; Build",id:"packaging--build",level:2},{value:"pnpm dlx + electron-builder (pnpm 10)",id:"pnpm-dlx--electron-builder-pnpm-10",level:3},{value:"Shared Modules: Use extraResources, NOT files glob",id:"shared-modules-use-extraresources-not-files-glob",level:3},{value:"Dynamic Project Root (Don&#39;t Hardcode Paths)",id:"dynamic-project-root-dont-hardcode-paths",level:3},{value:"Critical Pitfalls",id:"critical-pitfalls",level:2},{value:"electron-tabs: Tab Order Bug",id:"electron-tabs-tab-order-bug",level:3},{value:"electron-tabs: Required Settings",id:"electron-tabs-required-settings",level:3},{value:"Keyboard Shortcuts in Webview",id:"keyboard-shortcuts-in-webview",level:3},{value:"globalShortcut Conflicts with Other Apps",id:"globalshortcut-conflicts-with-other-apps",level:3},{value:"electron-tabs: Menu Reload Resets Tabs",id:"electron-tabs-menu-reload-resets-tabs",level:3},{value:"Shadow DOM Manipulation",id:"shadow-dom-manipulation",level:3},{value:"macOS Title Bar",id:"macos-title-bar",level:3},{value:"Open External Links in Default Browser (Cmd+Click)",id:"open-external-links-in-default-browser-cmdclick",level:3},{value:"nodenv/anyenv PATH Issues",id:"nodenvanyenv-path-issues",level:3},{value:"Detailed References",id:"detailed-references",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"electron-develop",children:"electron-develop"})}),"\n",(0,t.jsx)(n.admonition,{title:"Bundled Resources",type:"info",children:(0,t.jsxs)(n.p,{children:["This skill includes: ",(0,t.jsx)(n.a,{href:"#references",children:"references"})]})}),"\n",(0,t.jsx)(n.h1,{id:"electron-development",children:"Electron Development"}),"\n",(0,t.jsx)(n.h2,{id:"common-pattern-thin-wrapper-app",children:"Common Pattern: Thin Wrapper App"}),"\n",(0,t.jsx)(n.p,{children:"Electron as thin wrapper around a dev server (e.g., Vite, Docusaurus):"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Show splash screen"}),"\n",(0,t.jsx)(n.li,{children:"Spawn dev server as background process"}),"\n",(0,t.jsx)(n.li,{children:"Wait for server ready"}),"\n",(0,t.jsx)(n.li,{children:"Show BrowserWindow pointing to localhost URL"}),"\n",(0,t.jsx)(n.li,{children:"Clean up server on quit"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"references/background-process.md",children:"references/background-process.md"})," for implementation."]}),"\n",(0,t.jsx)(n.h2,{id:"packaging--build",children:"Packaging & Build"}),"\n",(0,t.jsx)(n.h3,{id:"pnpm-dlx--electron-builder-pnpm-10",children:"pnpm dlx + electron-builder (pnpm 10)"}),"\n",(0,t.jsxs)(n.p,{children:["pnpm 10 breaks ",(0,t.jsx)(n.code,{children:"pnpm dlx"})," for Electron. Required flags:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pnpm --config.trustPolicy=accept --config.strictDepBuilds=false dlx \\\n  --package=electron@36 --package=electron-builder@26 \\\n  electron-builder --mac -c.electronVersion=36.9.5\n"})}),"\n",(0,t.jsx)(n.h3,{id:"shared-modules-use-extraresources-not-files-glob",children:"Shared Modules: Use extraResources, NOT files glob"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// WRONG - shared module won\'t be in the asar\n"files": ["main.js", "../../../shared/module/**/*"]\n\n// CORRECT - copies to app\'s Resources directory\n"extraResources": [{ "from": "../../../shared/module", "to": "module" }]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Then resolve dynamically in main.js:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"function getSharedCorePath() {\n  if (app.isPackaged) {\n    return path.join(process.resourcesPath, 'electron-app-core');\n  }\n  return path.join(__dirname, '..', '..', '..', 'shared', 'electron-app-core');\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"dynamic-project-root-dont-hardcode-paths",children:"Dynamic Project Root (Don't Hardcode Paths)"}),"\n",(0,t.jsxs)(n.p,{children:["Resolve from app exe location instead of hardcoding worktree paths. See ",(0,t.jsx)(n.a,{href:"references/packaging.md",children:"references/packaging.md"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"critical-pitfalls",children:"Critical Pitfalls"}),"\n",(0,t.jsx)(n.h3,{id:"electron-tabs-tab-order-bug",children:"electron-tabs: Tab Order Bug"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"getTabs()"})," returns CREATION order, NOT visual order."]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// WRONG\ntabs[index].activate();\n\n// CORRECT\ntabGroup.getTabByPosition(index).activate(); // 0-indexed\n"})}),"\n",(0,t.jsx)(n.h3,{id:"electron-tabs-required-settings",children:"electron-tabs: Required Settings"}),"\n",(0,t.jsx)(n.p,{children:"Must use these settings (less secure, only for trusted content):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"webPreferences: {\n  nodeIntegration: true,\n  contextIsolation: false,\n  webviewTag: true,\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"keyboard-shortcuts-in-webview",children:"Keyboard Shortcuts in Webview"}),"\n",(0,t.jsxs)(n.p,{children:["Menu accelerators and ",(0,t.jsx)(n.code,{children:"document.keydown"})," don't work when webview has focus. Use ",(0,t.jsx)(n.code,{children:"globalShortcut"})," instead:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'globalShortcut.register("CommandOrControl+1", () => {\n  win.webContents.send("goto-tab", 0);\n});\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pitfall:"})," If using both menu accelerator AND globalShortcut for same key, shortcuts fire twice. Remove menu accelerator."]}),"\n",(0,t.jsx)(n.h3,{id:"globalshortcut-conflicts-with-other-apps",children:"globalShortcut Conflicts with Other Apps"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"globalShortcut"})," is ",(0,t.jsx)(n.strong,{children:"system-wide"})," - it intercepts shortcuts even when other Electron apps (e.g., Slack) are focused. Solution: register/unregister based on window focus:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'let shortcutsRegistered = false;\n\nfunction registerShortcuts() {\n  if (shortcutsRegistered) return;\n  globalShortcut.register("CommandOrControl+1", handler);\n  shortcutsRegistered = true;\n}\n\nfunction unregisterShortcuts() {\n  if (!shortcutsRegistered) return;\n  globalShortcut.unregister("CommandOrControl+1");\n  shortcutsRegistered = false;\n}\n\n// In window creation:\nwin.on("focus", registerShortcuts);\nwin.on("blur", () => {\n  setTimeout(() => {\n    if (!BrowserWindow.getFocusedWindow()) unregisterShortcuts();\n  }, 100);\n});\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"setTimeout"})," + focus check prevents unregistering when switching between your own windows."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Critical: Multiple cleanup points required."}),' Focus/blur alone is not enough - shortcuts can remain "stolen" after app closes if cleanup fails. Add these handlers:']}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// On macOS, app stays running when all windows close - must unregister\napp.on("window-all-closed", () => {\n  unregisterShortcuts();\n  if (process.platform !== "darwin") app.quit();\n});\n\n// Ensure cleanup before quit begins\napp.on("before-quit", () => {\n  unregisterShortcuts();\n});\n\n// Final fallback cleanup\napp.on("will-quit", () => {\n  globalShortcut.unregisterAll();\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:"Without all these cleanup points, shortcuts may remain intercepted even after your app closes, breaking shortcuts in other apps like Slack."}),"\n",(0,t.jsx)(n.h3,{id:"electron-tabs-menu-reload-resets-tabs",children:"electron-tabs: Menu Reload Resets Tabs"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Built-in ",(0,t.jsx)(n.code,{children:'{ role: "reload" }'})," reloads the main window (",(0,t.jsx)(n.code,{children:"tabbed-window.html"}),"), NOT the active tab's webview."]})," This causes all tabs to reinitialize and navigate back to the default URL."]}),"\n",(0,t.jsx)(n.p,{children:"Solution: Use custom menu items that send IPC to reload the active tab's webview:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// menu.js - Replace built-in roles with custom handlers\n{\n  label: "Reload",\n  accelerator: "CmdOrCtrl+R",\n  click: () => sendToFocusedWindow("menu-reload"),\n},\n{\n  label: "Force Reload",\n  accelerator: "CmdOrCtrl+Shift+R",\n  click: () => sendToFocusedWindow("menu-force-reload"),\n},\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// tabbed-window.html - Reload active tab\'s webview\nipcRenderer.on("menu-reload", () => {\n  const activeTab = tabGroup.getActiveTab();\n  if (activeTab && activeTab.webview) {\n    activeTab.webview.reload();\n  }\n});\n\nipcRenderer.on("menu-force-reload", () => {\n  const activeTab = tabGroup.getActiveTab();\n  if (activeTab && activeTab.webview) {\n    activeTab.webview.reloadIgnoringCache();\n  }\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"shadow-dom-manipulation",children:"Shadow DOM Manipulation"}),"\n",(0,t.jsxs)(n.p,{children:["Avoid manipulating electron-tabs shadow DOM directly - it breaks the component. CSS ",(0,t.jsx)(n.code,{children:"::part()"})," selectors may not work reliably."]}),"\n",(0,t.jsx)(n.h3,{id:"macos-title-bar",children:"macOS Title Bar"}),"\n",(0,t.jsxs)(n.p,{children:["Hidden title bar (",(0,t.jsx)(n.code,{children:'titleBarStyle: "hiddenInset"'}),") requires tab bar padding for traffic lights. Simpler: use standard title bar (no titleBarStyle option)."]}),"\n",(0,t.jsx)(n.h3,{id:"open-external-links-in-default-browser-cmdclick",children:"Open External Links in Default Browser (Cmd+Click)"}),"\n",(0,t.jsxs)(n.p,{children:["Electron doesn't open links in the system browser by default. Use ",(0,t.jsx)(n.code,{children:"setWindowOpenHandler"})," to intercept Cmd+click (which triggers a new-window request) and route external URLs to the default browser via ",(0,t.jsx)(n.code,{children:"shell.openExternal"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const { shell } = require('electron');\n\nconst devServerOrigin = new URL(config.devServerUrl).origin;\nwin.webContents.setWindowOpenHandler(({ url }) => {\n  try {\n    const urlOrigin = new URL(url).origin;\n    if (urlOrigin !== devServerOrigin) {\n      shell.openExternal(url);\n      return { action: 'deny' };\n    }\n  } catch {\n    // Invalid URL - let Electron handle it\n  }\n  return { action: 'deny' };\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:"This compares origins so same-origin links stay in the app while external URLs open in the default browser."}),"\n",(0,t.jsx)(n.h3,{id:"nodenvanyenv-path-issues",children:"nodenv/anyenv PATH Issues"}),"\n",(0,t.jsxs)(n.p,{children:["Spawned processes don't inherit version managers. Source shell profile first. See ",(0,t.jsx)(n.a,{href:"references/background-process.md",children:"references/background-process.md"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"detailed-references",children:"Detailed References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Packaging & build"}),": ",(0,t.jsx)(n.a,{href:"references/packaging.md",children:"references/packaging.md"})," - pnpm dlx, extraResources, dynamic project root"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Background process & dev server"}),": ",(0,t.jsx)(n.a,{href:"references/background-process.md",children:"references/background-process.md"})," - Spawn, wait, cleanup"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Webview patterns"}),": ",(0,t.jsx)(n.a,{href:"references/webview.md",children:"references/webview.md"})," - BrowserWindow, webview tag, IPC"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"electron-tabs patterns"}),": ",(0,t.jsx)(n.a,{href:"references/electron-tabs.md",children:"references/electron-tabs.md"})," - Setup, dark theme, tab titles"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/claude/skills/electron-develop/background-process",children:"Background Process & Dev Server"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/claude/skills/electron-develop/electron-tabs",children:"electron-tabs Reference"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/claude/skills/electron-develop/packaging",children:"Packaging & Build"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/claude/skills/electron-develop/webview",children:"Webview & BrowserWindow Patterns"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);