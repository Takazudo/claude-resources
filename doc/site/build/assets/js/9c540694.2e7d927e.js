"use strict";(self.webpackChunkclaude_code_doc_site=self.webpackChunkclaude_code_doc_site||[]).push([[9761],{3351(e,s,t){t.d(s,{R:()=>c,x:()=>r});var n=t(2128);const d={},i=n.createContext(d);function c(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),n.createElement(i.Provider,{value:s},e.children)}},3791(e,s,t){t.r(s),t.d(s,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>c,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"claude/skills/docusaurus-doc-title","title":"docusaurus-doc-title","description":"Add DocsSitemap component with expand/collapse navigation to a Docusaurus site\'s landing page. Generates doc-titles.json from markdown frontmatter and renders a full docs sitemap with collapsible sect...","source":"@site/docs/claude/skills/docusaurus-doc-title.mdx","sourceDirName":"claude/skills","slug":"/claude/skills/docusaurus-doc-title","permalink":"/docs/claude/skills/docusaurus-doc-title","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"title":"docusaurus-doc-title","description":"Add DocsSitemap component with expand/collapse navigation to a Docusaurus site\'s landing page. Generates doc-titles.json from markdown frontmatter and renders a full docs sitemap with collapsible sect..."},"sidebar":"claudeSidebar","previous":{"title":"docusaurus-develop","permalink":"/docs/claude/skills/docusaurus-develop"},"next":{"title":"docusaurus-doc-title-with-top-layout","permalink":"/docs/claude/skills/docusaurus-doc-title-with-top-layout"}}');var d=t(7900),i=t(3351);const c={title:"docusaurus-doc-title",description:"Add DocsSitemap component with expand/collapse navigation to a Docusaurus site's landing page. Generates doc-titles.json from markdown frontmatter and renders a full docs sitemap with collapsible sect..."},r="docusaurus-doc-title",o={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Detect Docusaurus Root",id:"step-1-detect-docusaurus-root",level:2},{value:"Step 2: Create the doc-titles generation script",id:"step-2-create-the-doc-titles-generation-script",level:2},{value:"Step 3: Create the DocsSitemap component",id:"step-3-create-the-docssitemap-component",level:2},{value:"Step 4: Add to the landing page",id:"step-4-add-to-the-landing-page",level:2},{value:"Step 5: Update config",id:"step-5-update-config",level:2},{value:"Step 6: Wire up scripts and gitignore",id:"step-6-wire-up-scripts-and-gitignore",level:2},{value:"Step 7: Verify",id:"step-7-verify",level:2}];function l(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.header,{children:(0,d.jsx)(s.h1,{id:"docusaurus-doc-title",children:"docusaurus-doc-title"})}),"\n",(0,d.jsx)(s.h1,{id:"docusaurus-docssitemap-doc-titles",children:"Docusaurus DocsSitemap (Doc Titles)"}),"\n",(0,d.jsxs)(s.p,{children:["Add a ",(0,d.jsx)(s.code,{children:"DocsSitemap"})," component that reads sidebars.ts (or .js) and doc-titles.json to render an expand/collapse full-page navigation on the Docusaurus landing page."]}),"\n",(0,d.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.code,{children:"gray-matter"})," npm dependency"]}),"\n",(0,d.jsxs)(s.li,{children:["Docusaurus site with ",(0,d.jsx)(s.code,{children:"sidebars.ts"})," (or ",(0,d.jsx)(s.code,{children:".js"}),")"]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.code,{children:"routeBasePath"})," set to ",(0,d.jsx)(s.code,{children:"/docs"})," (so ",(0,d.jsx)(s.code,{children:"src/pages/index.tsx"})," can serve as landing page)"]}),"\n"]}),"\n",(0,d.jsx)(s.h2,{id:"step-1-detect-docusaurus-root",children:"Step 1: Detect Docusaurus Root"}),"\n",(0,d.jsxs)(s.p,{children:["Find the directory containing ",(0,d.jsx)(s.code,{children:"docusaurus.config.ts"})," (or ",(0,d.jsx)(s.code,{children:"docusaurus.config.js"}),"). This is the Docusaurus root directory, referred to as ",(0,d.jsx)(s.code,{children:"{DOCUSAURUS_ROOT}"})," throughout this skill. All file paths below are relative to this root."]}),"\n",(0,d.jsx)(s.h2,{id:"step-2-create-the-doc-titles-generation-script",children:"Step 2: Create the doc-titles generation script"}),"\n",(0,d.jsxs)(s.p,{children:["Create ",(0,d.jsx)(s.code,{children:"{DOCUSAURUS_ROOT}/scripts/generate-doc-titles.js"}),":"]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-js",children:"#!/usr/bin/env node\nconst fs = require('fs');\nconst path = require('path');\nconst matter = require('gray-matter');\n\nconst DOCS_DIR = path.join(__dirname, '../docs');\nconst OUTPUT_FILE = path.join(__dirname, '../src/data/doc-titles.json');\n"})}),"\n",(0,d.jsxs)(s.p,{children:["The script recursively finds all ",(0,d.jsx)(s.code,{children:".md"}),"/",(0,d.jsx)(s.code,{children:".mdx"})," files in docs/, extracts title from frontmatter or first H1 heading, and outputs ",(0,d.jsx)(s.code,{children:"src/data/doc-titles.json"})," as ",(0,d.jsx)(s.code,{children:'{ "docId": "Title" }'}),"."]}),"\n",(0,d.jsx)(s.h2,{id:"step-3-create-the-docssitemap-component",children:"Step 3: Create the DocsSitemap component"}),"\n",(0,d.jsxs)(s.p,{children:["Create ",(0,d.jsx)(s.code,{children:"{DOCUSAURUS_ROOT}/src/components/DocsSitemap/index.tsx"}),":"]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-tsx",children:"import type { ReactNode } from 'react';\nimport useBaseUrl from '@docusaurus/useBaseUrl';\nimport sidebars from '@site/sidebars';\nimport docTitles from '@site/src/data/doc-titles.json';\n\nfunction generateLabel(sidebarId: string): string {\n  const name = sidebarId.replace(/Sidebar$/, '');\n  // Add special cases as needed (e.g., inbox -> INBOX)\n  return name.charAt(0).toUpperCase() + name.slice(1);\n}\n"})}),"\n",(0,d.jsx)(s.p,{children:"Key features:"}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:["Reads sidebar entries from ",(0,d.jsx)(s.code,{children:"sidebars.ts"})," (or ",(0,d.jsx)(s.code,{children:".js"}),")"]}),"\n",(0,d.jsxs)(s.li,{children:["For ",(0,d.jsx)(s.code,{children:"autogenerated"})," sidebar items, resolves docs from ",(0,d.jsx)(s.code,{children:"doc-titles.json"})," by matching ",(0,d.jsx)(s.code,{children:"dirName"})," prefix"]}),"\n",(0,d.jsxs)(s.li,{children:["Renders each sidebar as a ",(0,d.jsx)(s.code,{children:"<details>/<summary>"})," section (open by default)"]}),"\n",(0,d.jsxs)(s.li,{children:["Animated chevron (",(0,d.jsx)(s.code,{children:"\u25b6"}),") rotates 90deg when open"]}),"\n",(0,d.jsxs)(s.li,{children:["Hover effect on summary uses ",(0,d.jsx)(s.code,{children:"--ifm-color-primary"})]}),"\n"]}),"\n",(0,d.jsxs)(s.p,{children:["For autogenerated sidebars, filter ",(0,d.jsx)(s.code,{children:"doc-titles.json"})," entries by ",(0,d.jsx)(s.code,{children:"dirName/"})," prefix, excluding ",(0,d.jsx)(s.code,{children:"dirName/index"}),", and render as links."]}),"\n",(0,d.jsx)(s.h2,{id:"step-4-add-to-the-landing-page",children:"Step 4: Add to the landing page"}),"\n",(0,d.jsxs)(s.p,{children:["Create ",(0,d.jsx)(s.code,{children:"{DOCUSAURUS_ROOT}/src/pages/index.tsx"})," that imports and renders ",(0,d.jsx)(s.code,{children:"<DocsSitemap />"}),". This requires ",(0,d.jsx)(s.code,{children:"routeBasePath"})," in ",(0,d.jsx)(s.code,{children:"docusaurus.config.ts"})," (or ",(0,d.jsx)(s.code,{children:".js"}),") to be ",(0,d.jsx)(s.code,{children:"/docs"})," (not ",(0,d.jsx)(s.code,{children:"/"}),")."]}),"\n",(0,d.jsx)(s.p,{children:"Minimal landing page:"}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-tsx",children:"import Layout from '@theme/Layout';\nimport DocsSitemap from '@site/src/components/DocsSitemap';\n\nexport default function Home() {\n  return (\n    <Layout>\n      <main style={{ padding: '2rem', maxWidth: '900px', margin: '0 auto' }}>\n        <DocsSitemap />\n      </main>\n    </Layout>\n  );\n}\n"})}),"\n",(0,d.jsx)(s.h2,{id:"step-5-update-config",children:"Step 5: Update config"}),"\n",(0,d.jsxs)(s.p,{children:["In ",(0,d.jsx)(s.code,{children:"docusaurus.config.ts"})," (or ",(0,d.jsx)(s.code,{children:".js"}),"):"]}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:["Change ",(0,d.jsx)(s.code,{children:"routeBasePath: '/'"})," to ",(0,d.jsx)(s.code,{children:"routeBasePath: '/docs'"})]}),"\n",(0,d.jsxs)(s.li,{children:["Update search plugin's ",(0,d.jsx)(s.code,{children:"docsRouteBasePath"})," to ",(0,d.jsx)(s.code,{children:"/docs"})]}),"\n"]}),"\n",(0,d.jsxs)(s.p,{children:["Delete ",(0,d.jsx)(s.code,{children:"{DOCUSAURUS_ROOT}/docs/intro.md"})," if it has ",(0,d.jsx)(s.code,{children:"slug: /"})," (it conflicts with the new landing page)."]}),"\n",(0,d.jsxs)(s.p,{children:["Update any absolute doc links from ",(0,d.jsx)(s.code,{children:"/category/page"})," to ",(0,d.jsx)(s.code,{children:"/docs/category/page"}),"."]}),"\n",(0,d.jsx)(s.h2,{id:"step-6-wire-up-scripts-and-gitignore",children:"Step 6: Wire up scripts and gitignore"}),"\n",(0,d.jsxs)(s.p,{children:["In ",(0,d.jsx)(s.code,{children:"package.json"}),", add:"]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{className:"language-json",children:'"generate:doc-titles": "node scripts/generate-doc-titles.js"\n'})}),"\n",(0,d.jsxs)(s.p,{children:["Ensure ",(0,d.jsx)(s.code,{children:"generate"})," script calls it, and ",(0,d.jsx)(s.code,{children:"start"}),"/",(0,d.jsx)(s.code,{children:"build"})," call ",(0,d.jsx)(s.code,{children:"generate"})," first."]}),"\n",(0,d.jsxs)(s.p,{children:["Add to ",(0,d.jsx)(s.code,{children:".gitignore"}),":"]}),"\n",(0,d.jsx)(s.pre,{children:(0,d.jsx)(s.code,{children:"src/data/doc-titles.json\n"})}),"\n",(0,d.jsx)(s.h2,{id:"step-7-verify",children:"Step 7: Verify"}),"\n",(0,d.jsxs)(s.p,{children:["Run ",(0,d.jsx)(s.code,{children:"pnpm run generate"})," then ",(0,d.jsx)(s.code,{children:"pnpm run build"}),". Verify the landing page shows expandable sidebar sections with all doc links."]})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,d.jsx)(s,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}}}]);