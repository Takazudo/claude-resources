"use strict";(self.webpackChunkclaude_code_doc_site=self.webpackChunkclaude_code_doc_site||[]).push([[4720],{3351(e,n,s){s.d(n,{R:()=>r,x:()=>d});var i=s(2128);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},5148(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"claude/skills/npm-package-develop/tooling","title":"npm Package Development Tooling and Project Setup (2025-2026)","description":"Skill: npm-package-develop","source":"@site/docs/claude/skills/npm-package-develop/tooling.mdx","sourceDirName":"claude/skills/npm-package-develop","slug":"/claude/skills/npm-package-develop/tooling","permalink":"/docs/claude/skills/npm-package-develop/tooling","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"title":"npm Package Development Tooling and Project Setup (2025-2026)"},"sidebar":"claudeSidebar","previous":{"title":"npm Package Publishing, Versioning, and Quality: Best Practices (2025-2026)","permalink":"/docs/claude/skills/npm-package-develop/publishing"},"next":{"title":"package-json-develop","permalink":"/docs/claude/skills/package-json-develop"}}');var t=s(7900),l=s(3351);const r={title:"npm Package Development Tooling and Project Setup (2025-2026)"},d="npm Package Development Tooling and Project Setup (2025-2026)",o={},c=[{value:"Build Tools",id:"build-tools",level:2},{value:"tsup (Recommended for Most Projects)",id:"tsup-recommended-for-most-projects",level:3},{value:"Strengths",id:"strengths",level:4},{value:"Weaknesses",id:"weaknesses",level:4},{value:"Configuration Example",id:"configuration-example",level:4},{value:"tsdown (Emerging Successor to tsup)",id:"tsdown-emerging-successor-to-tsup",level:3},{value:"Strengths",id:"strengths-1",level:4},{value:"Weaknesses",id:"weaknesses-1",level:4},{value:"When to Consider",id:"when-to-consider",level:4},{value:"unbuild",id:"unbuild",level:3},{value:"Strengths",id:"strengths-2",level:4},{value:"Weaknesses",id:"weaknesses-2",level:4},{value:"Best For",id:"best-for",level:4},{value:"Rollup",id:"rollup",level:3},{value:"Strengths",id:"strengths-3",level:4},{value:"Weaknesses",id:"weaknesses-3",level:4},{value:"Best For",id:"best-for-1",level:4},{value:"esbuild (Direct Usage)",id:"esbuild-direct-usage",level:3},{value:"Strengths",id:"strengths-4",level:4},{value:"Weaknesses",id:"weaknesses-4",level:4},{value:"Best For",id:"best-for-2",level:4},{value:"tsc (TypeScript Compiler Only)",id:"tsc-typescript-compiler-only",level:3},{value:"Strengths",id:"strengths-5",level:4},{value:"Weaknesses",id:"weaknesses-5",level:4},{value:"Best For",id:"best-for-3",level:4},{value:"Summary Table",id:"summary-table",level:3},{value:"package.json Configuration",id:"packagejson-configuration",level:2},{value:"Recommended package.json for Dual CJS/ESM",id:"recommended-packagejson-for-dual-cjsesm",level:3},{value:"Key Fields Explained",id:"key-fields-explained",level:3},{value:"<code>type: &quot;module&quot;</code>",id:"type-module",level:4},{value:"<code>exports</code>",id:"exports",level:4},{value:"<code>main</code> and <code>module</code>",id:"main-and-module",level:4},{value:"<code>types</code>",id:"types",level:4},{value:"<code>files</code>",id:"files",level:4},{value:"<code>engines</code>",id:"engines",level:4},{value:"Validation Tools",id:"validation-tools",level:3},{value:"TypeScript Configuration",id:"typescript-configuration",level:2},{value:"Recommended tsconfig.json for Library Authoring",id:"recommended-tsconfigjson-for-library-authoring",level:3},{value:"Key Settings Explained",id:"key-settings-explained",level:3},{value:"Module and Resolution",id:"module-and-resolution",level:4},{value:"Strictness",id:"strictness",level:4},{value:"Declaration Files",id:"declaration-files",level:4},{value:"Performance",id:"performance",level:4},{value:"tsconfig.json for Node.js-Only Libraries (No Bundler)",id:"tsconfigjson-for-nodejs-only-libraries-no-bundler",level:3},{value:"Monorepo Considerations",id:"monorepo-considerations",level:2},{value:"When to Use a Monorepo",id:"when-to-use-a-monorepo",level:3},{value:"Use a Monorepo When",id:"use-a-monorepo-when",level:4},{value:"Stay with a Single Package When",id:"stay-with-a-single-package-when",level:4},{value:"Recommended Stack: pnpm Workspaces + Turborepo",id:"recommended-stack-pnpm-workspaces--turborepo",level:3},{value:"pnpm Workspaces",id:"pnpm-workspaces",level:4},{value:"Setup",id:"setup",level:5},{value:"Turborepo",id:"turborepo",level:4},{value:"Configuration",id:"configuration",level:5},{value:"Versioning and Publishing: Changesets",id:"versioning-and-publishing-changesets",level:3},{value:"Workflow",id:"workflow",level:4},{value:"Testing Frameworks",id:"testing-frameworks",level:2},{value:"Vitest (Recommended for New Projects)",id:"vitest-recommended-for-new-projects",level:3},{value:"Strengths",id:"strengths-6",level:4},{value:"Configuration",id:"configuration-1",level:4},{value:"Example Test",id:"example-test",level:4},{value:"Jest",id:"jest",level:3},{value:"When to Stick with Jest",id:"when-to-stick-with-jest",level:4},{value:"Testing Best Practices for npm Libraries",id:"testing-best-practices-for-npm-libraries",level:3},{value:"Linting and Formatting",id:"linting-and-formatting",level:2},{value:"Option A: Biome (Recommended for New Projects)",id:"option-a-biome-recommended-for-new-projects",level:3},{value:"Strengths",id:"strengths-7",level:4},{value:"Configuration",id:"configuration-2",level:4},{value:"Scripts",id:"scripts",level:4},{value:"Trade-offs",id:"trade-offs",level:4},{value:"Option B: ESLint Flat Config + Prettier",id:"option-b-eslint-flat-config--prettier",level:3},{value:"Configuration",id:"configuration-3",level:4},{value:"Recommendation",id:"recommendation",level:3},{value:"Development Workflow Tools",id:"development-workflow-tools",level:2},{value:"tsx (Recommended TypeScript Runner)",id:"tsx-recommended-typescript-runner",level:3},{value:"Features",id:"features",level:4},{value:"Usage",id:"usage",level:4},{value:"Node.js Native Watch Mode",id:"nodejs-native-watch-mode",level:3},{value:"Node.js Native TypeScript Support",id:"nodejs-native-typescript-support",level:3},{value:"Recommended Dev Scripts",id:"recommended-dev-scripts",level:3},{value:"Starter Templates and Scaffolding",id:"starter-templates-and-scaffolding",level:2},{value:"Manual Starter Setup (Recommended)",id:"manual-starter-setup-recommended",level:3},{value:"Minimal File Structure",id:"minimal-file-structure",level:3},{value:"Template Repositories",id:"template-repositories",level:3},{value:"Quick Init Commands",id:"quick-init-commands",level:3},{value:"Complete Minimal Example",id:"complete-minimal-example",level:2},{value:"package.json",id:"packagejson",level:3},{value:"tsup.config.ts",id:"tsupconfigts",level:3},{value:"tsconfig.json",id:"tsconfigjson",level:3},{value:"vitest.config.ts",id:"vitestconfigts",level:3},{value:"biome.json",id:"biomejson",level:3},{value:"Sources",id:"sources",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"npm-package-development-tooling-and-project-setup-2025-2026",children:"npm Package Development Tooling and Project Setup (2025-2026)"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Skill:"})," ",(0,t.jsx)(n.a,{href:"/docs/claude/skills/npm-package-develop",children:"npm-package-develop"})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h1,{id:"npm-package-development-tooling-and-project-setup-2025-2026-1",children:"npm Package Development Tooling and Project Setup (2025-2026)"}),"\n",(0,t.jsx)(n.p,{children:"A comprehensive guide to current best practices for building, configuring, testing, and publishing npm packages."}),"\n",(0,t.jsx)(n.h2,{id:"build-tools",children:"Build Tools"}),"\n",(0,t.jsx)(n.h3,{id:"tsup-recommended-for-most-projects",children:"tsup (Recommended for Most Projects)"}),"\n",(0,t.jsx)(n.p,{children:"tsup is an esbuild-powered bundler that works with zero configuration for TypeScript projects. It remains the most popular choice for library authors as of 2025."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["tsup","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/egoist/tsup",children:"https://github.com/egoist/tsup"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"strengths",children:"Strengths"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Zero-config out of the box: auto-detects entry points, handles TypeScript, optimizes output"}),"\n",(0,t.jsx)(n.li,{children:"Extremely fast builds via esbuild"}),"\n",(0,t.jsx)(n.li,{children:"Native dual CJS/ESM output"}),"\n",(0,t.jsxs)(n.li,{children:["Built-in ",(0,t.jsx)(n.code,{children:".d.ts"})," generation (via rollup-plugin-dts under the hood)"]}),"\n",(0,t.jsx)(n.li,{children:"Mature and well-documented"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"weaknesses",children:"Weaknesses"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"CSS support is still experimental"}),"\n",(0,t.jsx)(n.li,{children:"Limited plugin ecosystem compared to Rollup"}),"\n",(0,t.jsx)(n.li,{children:"Declaration file generation can be slower than the JS bundling itself"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"configuration-example",children:"Configuration Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'// tsup.config.ts\nimport { defineConfig } from "tsup";\n\nexport default defineConfig({\n  entry: ["src/index.ts"],\n  format: ["cjs", "esm"],\n  dts: true,\n  splitting: false,\n  sourcemap: true,\n  clean: true,\n  minify: false,\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"tsdown-emerging-successor-to-tsup",children:"tsdown (Emerging Successor to tsup)"}),"\n",(0,t.jsx)(n.p,{children:"tsdown is a new library bundler powered by Rolldown (the Rust-based Rollup successor at the heart of Vite). It is positioned as the successor to tsup and is compatible with tsup's main options."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["tsdown","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://tsdown.dev/",children:"https://tsdown.dev/"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"strengths-1",children:"Strengths"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Powered by Rolldown: 3x-16x faster production builds, up to 100x less memory usage"}),"\n",(0,t.jsx)(n.li,{children:"Compatible with tsup's main options for smooth migration"}),"\n",(0,t.jsx)(n.li,{children:"Backed by the VoidZero / Vite ecosystem (Evan You)"}),"\n",(0,t.jsx)(n.li,{children:"Built-in declaration file generation via Oxc"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"weaknesses-1",children:"Weaknesses"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Still relatively new (early adoption phase)"}),"\n",(0,t.jsx)(n.li,{children:"Smaller community and fewer battle-tested examples"}),"\n",(0,t.jsx)(n.li,{children:"Plugin ecosystem is developing"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"when-to-consider",children:"When to Consider"}),"\n",(0,t.jsx)(n.p,{children:"tsdown is worth evaluating for new projects in late 2025 and beyond, especially if you are already invested in the Vite ecosystem. For existing tsup projects, migration is straightforward but not urgent."}),"\n",(0,t.jsx)(n.h3,{id:"unbuild",children:"unbuild"}),"\n",(0,t.jsx)(n.p,{children:"unbuild is a generalized bundler built on Rollup. It is used by the Nuxt ecosystem to bundle Nuxt 3 and its sub-packages."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["unbuild","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/unjs/unbuild",children:"https://github.com/unjs/unbuild"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"strengths-2",children:"Strengths"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Rollup-based: excellent tree-shaking"}),"\n",(0,t.jsxs)(n.li,{children:["Automatic inference of entry points from ",(0,t.jsx)(n.code,{children:"package.json"})]}),"\n",(0,t.jsx)(n.li,{children:"Passive and active modes (stub mode for development)"}),"\n",(0,t.jsx)(n.li,{children:"Flexible hooks system"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"weaknesses-2",children:"Weaknesses"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Slower than esbuild-based tools"}),"\n",(0,t.jsx)(n.li,{children:"Smaller community than tsup (approximately 200k weekly downloads vs tsup's 2.7M)"}),"\n",(0,t.jsx)(n.li,{children:"More configuration required for complex setups"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"best-for",children:"Best For"}),"\n",(0,t.jsx)(n.p,{children:"Projects in the Nuxt/UnJS ecosystem, or projects that need advanced Rollup plugin capabilities."}),"\n",(0,t.jsx)(n.h3,{id:"rollup",children:"Rollup"}),"\n",(0,t.jsx)(n.p,{children:"Rollup is the original library bundler with the best tree-shaking in the ecosystem. Weekly downloads exceed 55M because it is used as a dependency by many other tools."}),"\n",(0,t.jsx)(n.h4,{id:"strengths-3",children:"Strengths"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Best-in-class tree-shaking"}),"\n",(0,t.jsx)(n.li,{children:"Massive plugin ecosystem"}),"\n",(0,t.jsx)(n.li,{children:"Proven and stable"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"weaknesses-3",children:"Weaknesses"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Significantly slower than esbuild-based tools"}),"\n",(0,t.jsx)(n.li,{children:"Requires more manual configuration"}),"\n",(0,t.jsx)(n.li,{children:"Verbose setup for TypeScript projects"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"best-for-1",children:"Best For"}),"\n",(0,t.jsx)(n.p,{children:"Projects requiring advanced tree-shaking, custom plugins, or unusual module targets."}),"\n",(0,t.jsx)(n.h3,{id:"esbuild-direct-usage",children:"esbuild (Direct Usage)"}),"\n",(0,t.jsx)(n.p,{children:"esbuild is the underlying engine behind tsup. Using it directly gives maximum speed but requires more manual setup."}),"\n",(0,t.jsx)(n.h4,{id:"strengths-4",children:"Strengths"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Fastest JavaScript bundler available"}),"\n",(0,t.jsx)(n.li,{children:"Written in Go for raw performance"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"weaknesses-4",children:"Weaknesses"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["No built-in ",(0,t.jsx)(n.code,{children:".d.ts"})," generation (requires separate ",(0,t.jsx)(n.code,{children:"tsc --emitDeclarationOnly"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"No built-in config file support (CLI flags or API calls)"}),"\n",(0,t.jsx)(n.li,{children:"Limited tree-shaking compared to Rollup"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"best-for-2",children:"Best For"}),"\n",(0,t.jsx)(n.p,{children:"Internal build pipelines where speed is paramount and you handle type declarations separately."}),"\n",(0,t.jsx)(n.h3,{id:"tsc-typescript-compiler-only",children:"tsc (TypeScript Compiler Only)"}),"\n",(0,t.jsxs)(n.p,{children:["Using ",(0,t.jsx)(n.code,{children:"tsc"})," alone without a bundler is a valid strategy for simple packages."]}),"\n",(0,t.jsx)(n.h4,{id:"strengths-5",children:"Strengths"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Zero extra dependencies"}),"\n",(0,t.jsx)(n.li,{children:"Guaranteed correct type declarations"}),"\n",(0,t.jsx)(n.li,{children:"Simplest possible setup"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"weaknesses-5",children:"Weaknesses"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"No bundling (output mirrors source directory structure)"}),"\n",(0,t.jsx)(n.li,{children:"No minification"}),"\n",(0,t.jsx)(n.li,{children:"Slower than esbuild for large codebases"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"best-for-3",children:"Best For"}),"\n",(0,t.jsx)(n.p,{children:"Simple utility libraries with few files, or when paired with a bundler for the final output."}),"\n",(0,t.jsx)(n.h3,{id:"summary-table",children:"Summary Table"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Tool"}),(0,t.jsx)(n.th,{children:"Speed"}),(0,t.jsx)(n.th,{children:"Tree-shaking"}),(0,t.jsx)(n.th,{children:"DTS"}),(0,t.jsx)(n.th,{children:"Config"}),(0,t.jsx)(n.th,{children:"Best For"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"tsup"}),(0,t.jsx)(n.td,{children:"Fast"}),(0,t.jsx)(n.td,{children:"Good"}),(0,t.jsx)(n.td,{children:"Built-in"}),(0,t.jsx)(n.td,{children:"Zero-config"}),(0,t.jsx)(n.td,{children:"Most libraries"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"tsdown"}),(0,t.jsx)(n.td,{children:"Fastest"}),(0,t.jsx)(n.td,{children:"Excellent"}),(0,t.jsx)(n.td,{children:"Built-in"}),(0,t.jsx)(n.td,{children:"Zero-config"}),(0,t.jsx)(n.td,{children:"New projects (2025+)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"unbuild"}),(0,t.jsx)(n.td,{children:"Medium"}),(0,t.jsx)(n.td,{children:"Excellent"}),(0,t.jsx)(n.td,{children:"Built-in"}),(0,t.jsx)(n.td,{children:"Low"}),(0,t.jsx)(n.td,{children:"Nuxt/UnJS ecosystem"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Rollup"}),(0,t.jsx)(n.td,{children:"Slow"}),(0,t.jsx)(n.td,{children:"Best"}),(0,t.jsx)(n.td,{children:"Plugin"}),(0,t.jsx)(n.td,{children:"Verbose"}),(0,t.jsx)(n.td,{children:"Complex libraries"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"esbuild"}),(0,t.jsx)(n.td,{children:"Fastest"}),(0,t.jsx)(n.td,{children:"Limited"}),(0,t.jsx)(n.td,{children:"None"}),(0,t.jsx)(n.td,{children:"Manual"}),(0,t.jsx)(n.td,{children:"Build pipelines"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"tsc"}),(0,t.jsx)(n.td,{children:"Slow"}),(0,t.jsx)(n.td,{children:"None"}),(0,t.jsx)(n.td,{children:"Native"}),(0,t.jsx)(n.td,{children:"tsconfig only"}),(0,t.jsx)(n.td,{children:"Simple utilities"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"packagejson-configuration",children:"package.json Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"recommended-packagejson-for-dual-cjsesm",children:"Recommended package.json for Dual CJS/ESM"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "my-library",\n  "version": "1.0.0",\n  "type": "module",\n  "main": "./dist/index.cjs",\n  "module": "./dist/index.js",\n  "types": "./dist/index.d.ts",\n  "exports": {\n    ".": {\n      "import": {\n        "types": "./dist/index.d.ts",\n        "default": "./dist/index.js"\n      },\n      "require": {\n        "types": "./dist/index.d.cts",\n        "default": "./dist/index.cjs"\n      }\n    },\n    "./utils": {\n      "import": {\n        "types": "./dist/utils.d.ts",\n        "default": "./dist/utils.js"\n      },\n      "require": {\n        "types": "./dist/utils.d.cts",\n        "default": "./dist/utils.cjs"\n      }\n    }\n  },\n  "files": [\n    "dist"\n  ],\n  "engines": {\n    "node": ">=18"\n  },\n  "scripts": {\n    "build": "tsup",\n    "dev": "tsup --watch",\n    "test": "vitest",\n    "lint": "biome check .",\n    "prepublishOnly": "npm run build",\n    "postbuild": "publint"\n  },\n  "devDependencies": {\n    "tsup": "^8.4",\n    "typescript": "^5.7",\n    "vitest": "^3.0",\n    "@biomejs/biome": "^2.3"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"key-fields-explained",children:"Key Fields Explained"}),"\n",(0,t.jsx)(n.h4,{id:"type-module",children:(0,t.jsx)(n.code,{children:'type: "module"'})}),"\n",(0,t.jsxs)(n.p,{children:["Setting ",(0,t.jsx)(n.code,{children:'"type": "module"'})," tells Node.js that ",(0,t.jsx)(n.code,{children:".js"})," files in this package use ESM syntax. This is the recommended default for new packages in 2025. Files with ",(0,t.jsx)(n.code,{children:".cjs"})," extension are treated as CommonJS regardless of this setting."]}),"\n",(0,t.jsx)(n.h4,{id:"exports",children:(0,t.jsx)(n.code,{children:"exports"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"exports"})," field is the modern replacement for ",(0,t.jsx)(n.code,{children:"main"}),". It enables conditional exports based on how the package is consumed. Key rules:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Always place ",(0,t.jsx)(n.code,{children:"types"})," first within each condition block"]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"import"})," condition is used by ESM consumers"]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"require"})," condition is used by CJS consumers"]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"default"})," fallback catches everything else"]}),"\n"]}),"\n",(0,t.jsxs)(n.h4,{id:"main-and-module",children:[(0,t.jsx)(n.code,{children:"main"})," and ",(0,t.jsx)(n.code,{children:"module"})]}),"\n",(0,t.jsx)(n.p,{children:"These fields exist for backward compatibility with older tools:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"main"}),": Entry point for older Node.js versions and bundlers that do not support ",(0,t.jsx)(n.code,{children:"exports"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"module"}),": Non-standard field used by older bundlers (Webpack 4, Rollup) to find the ESM entry"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"types",children:(0,t.jsx)(n.code,{children:"types"})}),"\n",(0,t.jsxs)(n.p,{children:["Top-level ",(0,t.jsx)(n.code,{children:"types"})," field is the fallback for TypeScript versions that do not support conditional exports in the ",(0,t.jsx)(n.code,{children:"exports"})," field."]}),"\n",(0,t.jsx)(n.h4,{id:"files",children:(0,t.jsx)(n.code,{children:"files"})}),"\n",(0,t.jsxs)(n.p,{children:["Whitelist of files and directories to include when publishing. Always use this instead of ",(0,t.jsx)(n.code,{children:".npmignore"}),". Set it to ",(0,t.jsx)(n.code,{children:'["dist"]'})," to include only the build output."]}),"\n",(0,t.jsx)(n.h4,{id:"engines",children:(0,t.jsx)(n.code,{children:"engines"})}),"\n",(0,t.jsx)(n.p,{children:"Declare the minimum Node.js version your package supports. As of 2025, Node.js 18 is the oldest LTS version still in maintenance."}),"\n",(0,t.jsx)(n.h3,{id:"validation-tools",children:"Validation Tools"}),"\n",(0,t.jsx)(n.p,{children:"Before publishing, validate your package configuration with these tools:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"publint"}),": Checks package.json for compatibility issues across environments","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://publint.dev",children:"https://publint.dev"})}),"\n",(0,t.jsxs)(n.li,{children:["Run locally: ",(0,t.jsx)(n.code,{children:"npx publint"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Are The Types Wrong?"}),": Analyzes TypeScript type definitions for module resolution issues","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://arethetypeswrong.github.io",children:"https://arethetypeswrong.github.io"})}),"\n",(0,t.jsxs)(n.li,{children:["Run locally: ",(0,t.jsx)(n.code,{children:"npx @arethetypeswrong/cli"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"npm pack"})," to inspect the tarball contents before publishing."]}),"\n",(0,t.jsx)(n.h2,{id:"typescript-configuration",children:"TypeScript Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"recommended-tsconfigjson-for-library-authoring",children:"Recommended tsconfig.json for Library Authoring"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "target": "ES2022",\n    "module": "ESNext",\n    "moduleResolution": "Bundler",\n    "lib": ["ES2022"],\n\n    "strict": true,\n    "esModuleInterop": true,\n    "skipLibCheck": true,\n    "forceConsistentCasingInFileNames": true,\n    "verbatimModuleSyntax": true,\n    "isolatedModules": true,\n\n    "declaration": true,\n    "declarationMap": true,\n    "sourceMap": true,\n\n    "outDir": "./dist",\n    "rootDir": "./src",\n\n    "noUncheckedIndexedAccess": true,\n    "noEmit": true\n  },\n  "include": ["src"],\n  "exclude": ["node_modules", "dist", "**/*.test.ts"]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"key-settings-explained",children:"Key Settings Explained"}),"\n",(0,t.jsx)(n.h4,{id:"module-and-resolution",children:"Module and Resolution"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:'module: "ESNext"'})}),": Allows TypeScript to output modern ESM syntax. The bundler (tsup/tsdown) handles the final format conversion."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:'moduleResolution: "Bundler"'})}),": Use this when a bundler processes the output. It supports package.json ",(0,t.jsx)(n.code,{children:"exports"})," and does not require file extensions in imports. For Node.js-only packages without a bundler, use ",(0,t.jsx)(n.code,{children:'"NodeNext"'})," instead."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:'target: "ES2022"'})}),": Provides modern features (top-level await, class fields, ",(0,t.jsx)(n.code,{children:"Array.at()"}),") while maintaining broad runtime compatibility."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"strictness",children:"Strictness"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"strict: true"})}),": Enables all strict type-checking options"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"verbatimModuleSyntax: true"})}),": Ensures import/export statements are preserved exactly as written. Enforces ",(0,t.jsx)(n.code,{children:"import type"})," for type-only imports, which improves tree-shaking."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"isolatedModules: true"})}),": Required by esbuild-based tools (tsup, tsdown, Vite). Ensures each file can be transpiled independently."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"noUncheckedIndexedAccess: true"})}),": Adds ",(0,t.jsx)(n.code,{children:"undefined"})," to index signatures, catching common runtime errors."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"declaration-files",children:"Declaration Files"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"declaration: true"})}),": Generates ",(0,t.jsx)(n.code,{children:".d.ts"})," files. When using tsup/tsdown, this is handled by the bundler, so set ",(0,t.jsx)(n.code,{children:"noEmit: true"})," in tsconfig and let the bundler manage declarations."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"declarationMap: true"})}),": Generates source maps for declarations, allowing consumers to navigate to original source code during debugging."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"performance",children:"Performance"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"skipLibCheck: true"})}),": Skips type-checking of ",(0,t.jsx)(n.code,{children:".d.ts"})," files from ",(0,t.jsx)(n.code,{children:"node_modules"}),", significantly reducing compilation time."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"incremental: true"})}),": Optional. Enables incremental compilation for faster subsequent builds. Add this if you run ",(0,t.jsx)(n.code,{children:"tsc"})," for type-checking in CI."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tsconfigjson-for-nodejs-only-libraries-no-bundler",children:"tsconfig.json for Node.js-Only Libraries (No Bundler)"}),"\n",(0,t.jsxs)(n.p,{children:["When using ",(0,t.jsx)(n.code,{children:"tsc"})," directly without a bundler:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "target": "ES2022",\n    "module": "NodeNext",\n    "moduleResolution": "NodeNext",\n\n    "strict": true,\n    "esModuleInterop": true,\n    "skipLibCheck": true,\n    "forceConsistentCasingInFileNames": true,\n    "verbatimModuleSyntax": true,\n    "isolatedModules": true,\n\n    "declaration": true,\n    "declarationMap": true,\n    "sourceMap": true,\n\n    "outDir": "./dist",\n    "rootDir": "./src"\n  },\n  "include": ["src"]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["With ",(0,t.jsx)(n.code,{children:'"module": "NodeNext"'}),", TypeScript requires file extensions in relative imports (e.g., ",(0,t.jsx)(n.code,{children:'import { foo } from "./utils.js"'}),")."]}),"\n",(0,t.jsx)(n.h2,{id:"monorepo-considerations",children:"Monorepo Considerations"}),"\n",(0,t.jsx)(n.h3,{id:"when-to-use-a-monorepo",children:"When to Use a Monorepo"}),"\n",(0,t.jsx)(n.h4,{id:"use-a-monorepo-when",children:"Use a Monorepo When"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You maintain multiple related packages that share code or types"}),"\n",(0,t.jsx)(n.li,{children:"A change in one package often requires coordinated changes in others"}),"\n",(0,t.jsx)(n.li,{children:"You want a unified CI/CD pipeline and consistent tooling across packages"}),"\n",(0,t.jsx)(n.li,{children:"Your project includes both a library and its documentation site, example apps, or CLI tools"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"stay-with-a-single-package-when",children:"Stay with a Single Package When"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You are publishing a single, focused library"}),"\n",(0,t.jsx)(n.li,{children:"The package has no internal sub-packages or related apps"}),"\n",(0,t.jsx)(n.li,{children:"The overhead of monorepo tooling is not justified by the project scope"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"recommended-stack-pnpm-workspaces--turborepo",children:"Recommended Stack: pnpm Workspaces + Turborepo"}),"\n",(0,t.jsx)(n.h4,{id:"pnpm-workspaces",children:"pnpm Workspaces"}),"\n",(0,t.jsx)(n.p,{children:"pnpm is the recommended package manager for monorepos due to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Content-addressable storage: deduplicates packages across the workspace, saving disk space"}),"\n",(0,t.jsxs)(n.li,{children:["Strict ",(0,t.jsx)(n.code,{children:"node_modules"}),": prevents phantom dependencies (accessing packages not declared in your own ",(0,t.jsx)(n.code,{children:"package.json"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Built-in workspace protocol: ",(0,t.jsx)(n.code,{children:'"workspace:*"'})," for linking internal packages"]}),"\n",(0,t.jsx)(n.li,{children:"Fastest install times among npm, Yarn, and pnpm"}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"setup",children:"Setup"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# pnpm-workspace.yaml\npackages:\n  - "packages/*"\n  - "apps/*"\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"project-root/\n  packages/\n    core/\n      package.json\n      src/\n    utils/\n      package.json\n      src/\n  apps/\n    docs/\n      package.json\n    example/\n      package.json\n  package.json\n  pnpm-workspace.yaml\n  turbo.json\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Use a namespace prefix for internal packages (e.g., ",(0,t.jsx)(n.code,{children:"@myorg/core"}),", ",(0,t.jsx)(n.code,{children:"@myorg/utils"}),") to avoid conflicts with public npm packages."]}),"\n",(0,t.jsx)(n.h4,{id:"turborepo",children:"Turborepo"}),"\n",(0,t.jsx)(n.p,{children:"Turborepo is a build system designed for JavaScript/TypeScript monorepos."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Intelligent caching: if nothing changed, a 30-second build completes in 0.2 seconds"}),"\n",(0,t.jsx)(n.li,{children:"Parallel task execution across packages"}),"\n",(0,t.jsx)(n.li,{children:"Dependency-aware task ordering"}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// turbo.json\n{\n  "$schema": "https://turbo.build/schema.json",\n  "tasks": {\n    "build": {\n      "dependsOn": ["^build"],\n      "outputs": ["dist/**"]\n    },\n    "test": {\n      "dependsOn": ["build"]\n    },\n    "lint": {},\n    "dev": {\n      "cache": false,\n      "persistent": true\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"versioning-and-publishing-changesets",children:"Versioning and Publishing: Changesets"}),"\n",(0,t.jsx)(n.p,{children:"Changesets is the standard tool for managing versions and changelogs in monorepos."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["changesets","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/changesets/changesets",children:"https://github.com/changesets/changesets"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"workflow",children:"Workflow"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Contributors add a changeset file describing their change: ",(0,t.jsx)(n.code,{children:"pnpm changeset"})]}),"\n",(0,t.jsxs)(n.li,{children:["Changesets stores the intent (patch/minor/major) as a Markdown file in ",(0,t.jsx)(n.code,{children:".changeset/"})]}),"\n",(0,t.jsxs)(n.li,{children:["At release time, ",(0,t.jsx)(n.code,{children:"pnpm changeset version"})," bumps versions and updates changelogs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"pnpm changeset publish"})," publishes updated packages to npm"]}),"\n",(0,t.jsxs)(n.li,{children:["GitHub Actions integration automates the entire process via the ",(0,t.jsx)(n.code,{children:"changesets/action"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"testing-frameworks",children:"Testing Frameworks"}),"\n",(0,t.jsx)(n.h3,{id:"vitest-recommended-for-new-projects",children:"Vitest (Recommended for New Projects)"}),"\n",(0,t.jsx)(n.p,{children:"Vitest is the recommended testing framework for npm library development in 2025-2026. It is built on Vite and offers native ESM and TypeScript support."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Vitest","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://vitest.dev",children:"https://vitest.dev"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"strengths-6",children:"Strengths"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Native ESM support without configuration"}),"\n",(0,t.jsxs)(n.li,{children:["Native TypeScript support (no ",(0,t.jsx)(n.code,{children:"ts-jest"})," transformer needed)"]}),"\n",(0,t.jsxs)(n.li,{children:["Compatible with Jest's API (",(0,t.jsx)(n.code,{children:"describe"}),", ",(0,t.jsx)(n.code,{children:"it"}),", ",(0,t.jsx)(n.code,{children:"expect"}),", ",(0,t.jsx)(n.code,{children:"vi.fn()"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Built-in watch mode with HMR-level speed"}),"\n",(0,t.jsx)(n.li,{children:"4x faster cold runs and 30% lower memory usage compared to Jest (per Vitest benchmarks)"}),"\n",(0,t.jsxs)(n.li,{children:["Built-in coverage via ",(0,t.jsx)(n.code,{children:"@vitest/coverage-v8"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"configuration-1",children:"Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'// vitest.config.ts\nimport { defineConfig } from "vitest/config";\n\nexport default defineConfig({\n  test: {\n    globals: true,\n    environment: "node",\n    include: ["src/**/*.test.ts"],\n    coverage: {\n      provider: "v8",\n      include: ["src/**/*.ts"],\n      exclude: ["src/**/*.test.ts"],\n    },\n  },\n});\n'})}),"\n",(0,t.jsx)(n.h4,{id:"example-test",children:"Example Test"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'// src/add.test.ts\nimport { describe, it, expect } from "vitest";\nimport { add } from "./add.js";\n\ndescribe("add", () => {\n  it("adds two numbers", () => {\n    expect(add(1, 2)).toBe(3);\n  });\n\n  it("handles negative numbers", () => {\n    expect(add(-1, 1)).toBe(0);\n  });\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"jest",children:"Jest"}),"\n",(0,t.jsx)(n.p,{children:"Jest remains a viable choice for projects with existing Jest test suites or for React Native development where Jest is required."}),"\n",(0,t.jsx)(n.h4,{id:"when-to-stick-with-jest",children:"When to Stick with Jest"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Existing large test suite already using Jest"}),"\n",(0,t.jsx)(n.li,{children:"React Native projects (Jest is the standard)"}),"\n",(0,t.jsx)(n.li,{children:"Need for specific Jest plugins not yet available in Vitest"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"testing-best-practices-for-npm-libraries",children:"Testing Best Practices for npm Libraries"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Test both CJS and ESM entry points to catch module resolution issues"}),"\n",(0,t.jsxs)(n.li,{children:["Test against the built output (",(0,t.jsx)(n.code,{children:"dist/"}),") in addition to source, at least in CI"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"npm pack"})," and install the tarball in a test project to verify the published package works correctly"]}),"\n",(0,t.jsx)(n.li,{children:"Keep unit tests fast and focused; run them in watch mode during development"}),"\n",(0,t.jsx)(n.li,{children:"Use coverage thresholds to prevent regressions"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"linting-and-formatting",children:"Linting and Formatting"}),"\n",(0,t.jsx)(n.h3,{id:"option-a-biome-recommended-for-new-projects",children:"Option A: Biome (Recommended for New Projects)"}),"\n",(0,t.jsx)(n.p,{children:"Biome is an all-in-one linter and formatter written in Rust. As of v2.3 (January 2026), it includes 423+ lint rules and type-aware linting capabilities."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Biome","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://biomejs.dev",children:"https://biomejs.dev"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"strengths-7",children:"Strengths"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"10-25x faster than ESLint + Prettier"}),"\n",(0,t.jsx)(n.li,{children:"Single tool replaces both ESLint and Prettier"}),"\n",(0,t.jsxs)(n.li,{children:["Single configuration file (",(0,t.jsx)(n.code,{children:"biome.json"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Prettier-compatible formatting output"}),"\n",(0,t.jsx)(n.li,{children:"Zero npm dependencies (ships as a single binary)"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"configuration-2",children:"Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// biome.json\n{\n  "$schema": "https://biomejs.dev/schemas/2.3.0/schema.json",\n  "vcs": {\n    "enabled": true,\n    "clientKind": "git",\n    "useIgnoreFile": true\n  },\n  "formatter": {\n    "enabled": true,\n    "indentStyle": "space",\n    "indentWidth": 2,\n    "lineWidth": 100\n  },\n  "linter": {\n    "enabled": true,\n    "rules": {\n      "recommended": true\n    }\n  },\n  "javascript": {\n    "formatter": {\n      "quoteStyle": "double",\n      "semicolons": "always"\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"scripts",children:"Scripts"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "lint": "biome check .",\n    "lint:fix": "biome check --write .",\n    "format": "biome format --write ."\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"trade-offs",children:"Trade-offs"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Biome's lint rule coverage sits at approximately 85% of what typescript-eslint provides for type-aware rules"}),"\n",(0,t.jsx)(n.li,{children:"Plugin ecosystem is significantly smaller than ESLint's"}),"\n",(0,t.jsxs)(n.li,{children:["Some niche ESLint plugins (e.g., ",(0,t.jsx)(n.code,{children:"eslint-plugin-import"}),", specialized framework plugins) have no Biome equivalent yet"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"option-b-eslint-flat-config--prettier",children:"Option B: ESLint Flat Config + Prettier"}),"\n",(0,t.jsxs)(n.p,{children:["For projects that need the full ESLint plugin ecosystem, the flat config format (",(0,t.jsx)(n.code,{children:"eslint.config.mjs"}),") is the current standard. The legacy ",(0,t.jsx)(n.code,{children:".eslintrc.*"})," format is deprecated."]}),"\n",(0,t.jsx)(n.h4,{id:"configuration-3",children:"Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'// eslint.config.mjs\nimport eslint from "@eslint/js";\nimport { defineConfig } from "eslint/config";\nimport tseslint from "typescript-eslint";\n\nexport default defineConfig([\n  {\n    ignores: ["dist/", "node_modules/"],\n  },\n  eslint.configs.recommended,\n  ...tseslint.configs.recommendedTypeChecked,\n  {\n    languageOptions: {\n      parserOptions: {\n        projectService: true,\n      },\n    },\n  },\n  {\n    files: ["**/*.js", "**/*.mjs"],\n    ...tseslint.configs.disableTypeChecked,\n  },\n]);\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// .prettierrc\n{\n  "semi": true,\n  "singleQuote": false,\n  "trailingComma": "all",\n  "printWidth": 100,\n  "tabWidth": 2\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"recommendation",children:"Recommendation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"New projects"}),": Use Biome. The speed advantage and single-tool simplicity outweigh the smaller rule set for most library development."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Existing projects with heavy ESLint customization"}),": Stay with ESLint flat config + Prettier. Migration is possible but may not be worth the effort if you depend on many ESLint plugins."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Projects requiring type-aware lint rules extensively"}),": ESLint with typescript-eslint provides the most comprehensive type-checked linting."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"development-workflow-tools",children:"Development Workflow Tools"}),"\n",(0,t.jsx)(n.h3,{id:"tsx-recommended-typescript-runner",children:"tsx (Recommended TypeScript Runner)"}),"\n",(0,t.jsx)(n.p,{children:"tsx is an esbuild-powered TypeScript executor that replaces the combination of ts-node + nodemon."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["tsx","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/privatenumber/tsx",children:"https://github.com/privatenumber/tsx"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"5-10x faster startup than ts-node"}),"\n",(0,t.jsxs)(n.li,{children:["Built-in watch mode: ",(0,t.jsx)(n.code,{children:"tsx watch src/index.ts"})]}),"\n",(0,t.jsx)(n.li,{children:"Handles both CJS and ESM seamlessly"}),"\n",(0,t.jsxs)(n.li,{children:["Drop-in replacement for ",(0,t.jsx)(n.code,{children:"node"})," command"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "dev": "tsx watch src/index.ts",\n    "start": "tsx src/index.ts"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"nodejs-native-watch-mode",children:"Node.js Native Watch Mode"}),"\n",(0,t.jsxs)(n.p,{children:["Node.js v18+ includes a built-in ",(0,t.jsx)(n.code,{children:"--watch"})," flag, eliminating the need for nodemon in many cases."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "dev": "node --watch dist/index.js"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"This is useful when you are already building to JavaScript and want to watch the output without an additional tool."}),"\n",(0,t.jsx)(n.h3,{id:"nodejs-native-typescript-support",children:"Node.js Native TypeScript Support"}),"\n",(0,t.jsx)(n.p,{children:"Starting with Node.js v23.6.0, TypeScript files can be run natively via type stripping (no compilation, just removal of type annotations). This feature is experimental and not yet recommended for production."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Node.js v23.6+\nnode src/index.ts\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Limitations: does not support ",(0,t.jsx)(n.code,{children:"enum"}),", ",(0,t.jsx)(n.code,{children:"namespace"}),", or other TypeScript-specific syntax that requires code generation. For these, the ",(0,t.jsx)(n.code,{children:"--experimental-transform-types"})," flag is needed."]}),"\n",(0,t.jsx)(n.h3,{id:"recommended-dev-scripts",children:"Recommended Dev Scripts"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "dev": "tsup --watch",\n    "dev:run": "tsx watch src/index.ts",\n    "build": "tsup",\n    "test": "vitest",\n    "test:run": "vitest run",\n    "test:coverage": "vitest run --coverage",\n    "lint": "biome check .",\n    "lint:fix": "biome check --write .",\n    "typecheck": "tsc --noEmit",\n    "prepublishOnly": "npm run build",\n    "postbuild": "publint"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"starter-templates-and-scaffolding",children:"Starter Templates and Scaffolding"}),"\n",(0,t.jsx)(n.h3,{id:"manual-starter-setup-recommended",children:"Manual Starter Setup (Recommended)"}),"\n",(0,t.jsx)(n.p,{children:"There is no single dominant scaffolding tool for npm packages in 2025. The ecosystem favors manual setup with well-documented configurations. The sections above provide all the configuration needed."}),"\n",(0,t.jsx)(n.h3,{id:"minimal-file-structure",children:"Minimal File Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"my-library/\n  src/\n    index.ts\n    index.test.ts\n  dist/               # generated by build\n  package.json\n  tsconfig.json\n  tsup.config.ts      # or tsdown.config.ts\n  vitest.config.ts\n  biome.json           # or eslint.config.mjs + .prettierrc\n  .gitignore\n  LICENSE\n  README.md\n"})}),"\n",(0,t.jsx)(n.h3,{id:"template-repositories",children:"Template Repositories"}),"\n",(0,t.jsx)(n.p,{children:"Several open-source repositories serve as reference implementations:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"VulcanJS/npm-the-right-way"}),": Demonstrates full-stack typed npm package setup","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/VulcanJS/npm-the-right-way",children:"https://github.com/VulcanJS/npm-the-right-way"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"antfu/starter-ts"}),": Anthony Fu's TypeScript starter for libraries","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/antfu/starter-ts",children:"https://github.com/antfu/starter-ts"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"quick-init-commands",children:"Quick Init Commands"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Initialize project\nmkdir my-library && cd my-library\npnpm init\npnpm add -D typescript tsup vitest @biomejs/biome\n\n# Generate tsconfig\nnpx tsc --init\n\n# Initialize Biome\nnpx @biomejs/biome init\n"})}),"\n",(0,t.jsx)(n.h2,{id:"complete-minimal-example",children:"Complete Minimal Example"}),"\n",(0,t.jsx)(n.p,{children:"Putting it all together, here is a minimal but production-ready npm package setup."}),"\n",(0,t.jsx)(n.h3,{id:"packagejson",children:"package.json"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "name": "my-library",\n  "version": "0.1.0",\n  "type": "module",\n  "main": "./dist/index.cjs",\n  "module": "./dist/index.js",\n  "types": "./dist/index.d.ts",\n  "exports": {\n    ".": {\n      "import": {\n        "types": "./dist/index.d.ts",\n        "default": "./dist/index.js"\n      },\n      "require": {\n        "types": "./dist/index.d.cts",\n        "default": "./dist/index.cjs"\n      }\n    }\n  },\n  "files": ["dist"],\n  "engines": {\n    "node": ">=18"\n  },\n  "scripts": {\n    "build": "tsup",\n    "dev": "tsup --watch",\n    "test": "vitest",\n    "test:run": "vitest run",\n    "lint": "biome check .",\n    "typecheck": "tsc --noEmit",\n    "prepublishOnly": "npm run build"\n  },\n  "devDependencies": {\n    "@biomejs/biome": "^2.3",\n    "tsup": "^8.4",\n    "typescript": "^5.7",\n    "vitest": "^3.0"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"tsupconfigts",children:"tsup.config.ts"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'import { defineConfig } from "tsup";\n\nexport default defineConfig({\n  entry: ["src/index.ts"],\n  format: ["cjs", "esm"],\n  dts: true,\n  splitting: false,\n  sourcemap: true,\n  clean: true,\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"tsconfigjson",children:"tsconfig.json"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "target": "ES2022",\n    "module": "ESNext",\n    "moduleResolution": "Bundler",\n    "lib": ["ES2022"],\n    "strict": true,\n    "esModuleInterop": true,\n    "skipLibCheck": true,\n    "forceConsistentCasingInFileNames": true,\n    "verbatimModuleSyntax": true,\n    "isolatedModules": true,\n    "declaration": true,\n    "declarationMap": true,\n    "sourceMap": true,\n    "outDir": "./dist",\n    "rootDir": "./src",\n    "noUncheckedIndexedAccess": true,\n    "noEmit": true\n  },\n  "include": ["src"],\n  "exclude": ["node_modules", "dist"]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"vitestconfigts",children:"vitest.config.ts"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'import { defineConfig } from "vitest/config";\n\nexport default defineConfig({\n  test: {\n    globals: true,\n    include: ["src/**/*.test.ts"],\n  },\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"biomejson",children:"biome.json"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "$schema": "https://biomejs.dev/schemas/2.3.0/schema.json",\n  "formatter": {\n    "indentStyle": "space",\n    "indentWidth": 2,\n    "lineWidth": 100\n  },\n  "linter": {\n    "rules": {\n      "recommended": true\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"sources",children:"Sources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://antfu.me/posts/publish-esm-and-cjs",children:"Ship ESM and CJS in one Package - Anthony Fu"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://lirantal.com/blog/typescript-in-2025-with-esm-and-cjs-npm-publishing",children:"TypeScript in 2025 with ESM and CJS npm publishing - Liran Tal"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://hirok.io/posts/package-json-exports",children:"Guide to the package.json exports field - Hiroki Osame"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://johnnyreilly.com/dual-publishing-esm-cjs-modules-with-tsup-and-are-the-types-wrong",children:"Dual Publishing ESM and CJS Modules with tsup - John Reilly"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.totaltypescript.com/tsconfig-cheat-sheet",children:"The TSConfig Cheat Sheet - Total TypeScript"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://2ality.com/2025/01/tsconfig-json.html",children:"A guide to tsconfig.json - 2ality"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://2ality.com/2025/02/typescript-esm-packages.html",children:"Tutorial: publishing ESM-based npm packages with TypeScript - 2ality"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/handbook/modules/guides/choosing-compiler-options.html",children:"TypeScript: Choosing Compiler Options - Official Docs"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://betterstack.com/community/guides/scaling-nodejs/vitest-vs-jest/",children:"Vitest vs Jest - Better Stack"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://vitest.dev/guide/",children:"Vitest Official Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://medium.com/better-dev-nextjs-react/biome-vs-eslint-prettier-the-2025-linting-revolution-you-need-to-know-about-ec01c5d5b6c8",children:"Biome vs ESLint + Prettier: The 2025 Linting Revolution"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://advancedfrontends.com/eslint-flat-config-typescript-javascript/",children:"Modern Linting in 2025: ESLint Flat Config"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://typescript-eslint.io/getting-started/",children:"typescript-eslint Getting Started"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://jsdev.space/complete-monorepo-guide/",children:"Complete Monorepo Guide: pnpm + Workspace + Changesets"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://turborepo.dev/docs/crafting-your-repository/structuring-a-repository",children:"Turborepo: Structuring a Repository"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://betterstack.com/community/guides/scaling-nodejs/tsx-vs-ts-node/",children:"TSX vs ts-node - Better Stack"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://nodejs.org/en/learn/typescript/run-natively",children:"Node.js: Running TypeScript Natively"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://tsdown.dev/guide/",children:"tsdown - The Elegant Bundler for Libraries"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://voidzero.dev/posts/announcing-rolldown-vite",children:"Announcing Rolldown-Vite - VoidZero"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://publint.dev/docs/",children:"publint - Getting Started"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://arethetypeswrong.github.io/",children:"Are The Types Wrong?"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/changesets/changesets",children:"Changesets - GitHub"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://alan.norbauer.com/articles/tsdown-bundler/",children:"Switching from tsup to tsdown - Alan Norbauer"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);