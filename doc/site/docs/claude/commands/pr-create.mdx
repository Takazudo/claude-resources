---
title: "/pr-create"
description: "Create a pull request with automatic base branch detection."
---

# /pr-create

# PR Create Command

Create a pull request by automatically detecting the correct base branch from git history.

## Usage

- `/pr-create` - Create PR with auto-detected base branch
- `/pr-create &lt;target-branch&gt;` - Create PR targeting the specified branch

## Steps

### 1. Check Current State

- Run `git status` to verify you're on a feature branch (not main/master/develop)
- Run `git branch --show-current` to get the current branch name
- Ensure there are commits to create a PR for

### 2. Determine the Base Branch

**If target branch is explicitly provided:** Use the specified branch as the base branch. Skip auto-detection.

**If no target branch provided:** Auto-detect which branch the current branch was created from.

Use git to find the merge-base and identify the parent branch:

```bash
# Get list of remote branches
git fetch origin

# Find the most likely parent branch by checking merge-base with common branches
# Check against main, master, develop, and other long-lived branches
```

Strategy to detect base branch:

1. Get the first commit of the current branch that's not in any other branch
2. Find which branch that commit's parent is reachable from
3. Common approach: compare merge-base distance with candidate branches

```bash
# For each candidate branch (main, master, develop, etc.):
git merge-base <current-branch> origin/<candidate-branch>

# The branch with the closest merge-base (most recent common ancestor)
# is likely the parent branch
```

Alternative method using git log:
```bash
# Show the branch point
git log --oneline --graph --decorate -20

# Find where current branch diverged
git log --oneline origin/main..HEAD
git log --oneline origin/develop..HEAD
```

**IMPORTANT:**

- If the branch was created from a feature branch (not main/develop), detect that
- Always verify with the user if the detected base branch looks incorrect
- Never assume `main` or `master` - always detect from history

### 3. Check for Existing PR

```bash
gh pr list --head <current-branch>
```

If a PR already exists, inform the user and ask if they want to view or update it.

### 4. Prepare PR Content

- Run `git log origin/&lt;base-branch&gt;..HEAD --oneline` to see all commits
- Run `git diff origin/&lt;base-branch&gt;..HEAD --stat` to see changed files
- Analyze the changes to suggest a PR title and description

### 5. Confirm with User

Before creating the PR, confirm:

- **Current branch:** `&lt;branch-name&gt;`
- **Base branch (target):** `&lt;base-branch&gt;` (user-specified or auto-detected)
- **Commits to be included:** List of commits
- **Suggested title:** Based on commit messages or branch name

Ask the user to confirm or modify these values.

### 6. Create the PR

```bash
gh pr create \
  --base <base-branch> \
  --title "<pr-title>" \
  --body "$(cat <<'EOF'
## Summary
<brief description of changes>

## Changes
<list of main changes>

## Test Plan
<how to test the changes>
EOF
)"
```

### 7. Report Result

After PR creation:

- Display the PR URL
- Show PR number
- Confirm base branch and head branch

## Important Notes

- **User-specified target branch takes priority** - if provided, use it directly
- **Auto-detect the base branch from git history** when not specified - never default to main/master
- If detection is ambiguous, ask the user to specify
- Verify the current branch has been pushed to origin before creating PR
- If not pushed, push with `git push -u origin &lt;branch-name&gt;` first
- Include meaningful PR title and description based on the changes
